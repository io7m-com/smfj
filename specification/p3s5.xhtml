<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>com.io7m.smfj 0.14.0 Specification: 3.5. Section - smf</title><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8"/><link rel="stylesheet" type="text/css" href="kstructural-layout.css"/><link rel="stylesheet" type="text/css" href="kstructural-colour.css"/><link rel="stylesheet" type="text/css" href="specification.css"/></head><body><div class="st300_body"><div class="st300_navbar st300_navbar_top"><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_title_cell">3.4. Section - end</td><td class="st300_navbar_up_title_cell">3. SMF/B - Binary Encoding</td><td class="st300_navbar_next_title_cell">3.6. Section - triangles</td></tr><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="p3s4.xhtml#st300_p3s4" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="p3.xhtml#st300_p3" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"><a rel="next" href="p3s6.xhtml#st300_p3s6" title="Go to next page">Next</a></td></tr></table><hr class="st300_hr"/></div><div class="st300_section_container"><a id="smfb.sections.smf"/><div class="st300_section_title_number"><a id="st300_p3s5" href="#st300_p3s5" title="Section 3.5: Section - smf">3.5</a></div><div class="st300_section_title">Section - smf</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p3s5.xhtml#st300_p3s5ss1" title="Link to subsection 3.5.1: Definition">3.5.1. Definition</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p3s5.xhtml#st300_p3s5ss2" title="Link to subsection 3.5.2: Cardinality/Ordering">3.5.2. Cardinality/Ordering</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p3s5.xhtml#st300_p3s5ss3" title="Link to subsection 3.5.3: Magic Number">3.5.3. Magic Number</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p3s5.xhtml#st300_p3s5ss4" title="Link to subsection 3.5.4: Data">3.5.4. Data</a></li></ul><div class="st300_subsection_container"><a id="smfb.sections.smf.def"/><div class="st300_subsection_title_number"><a id="st300_p3s5ss1" href="#st300_p3s5ss1" title="Subsection 3.5.1: Definition">3.5.1</a></div><div class="st300_subsection_title">Definition</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss1c1" href="#st300_p3s5ss1c1" title="Paragraph 3.5.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">smf</span> section specifies information common to all sections in an <span class="st300_term type">SMF/B</span> file.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.smf.cardinality"/><div class="st300_subsection_title_number"><a id="st300_p3s5ss2" href="#st300_p3s5ss2" title="Subsection 3.5.2: Cardinality/Ordering">3.5.2</a></div><div class="st300_subsection_title">Cardinality/Ordering</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss2c1" href="#st300_p3s5ss2c1" title="Paragraph 3.5.2.1">1</a></div><div class="st300_paragraph">An <span class="st300_term type">smf</span> section MUST appear exactly once in an <span class="st300_term type">SMF/B</span> file.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss2c2" href="#st300_p3s5ss2c2" title="Paragraph 3.5.2.2">2</a></div><div class="st300_paragraph">The <span class="st300_term type">smf</span> section MUST be the first section in an <span class="st300_term type">SMF/B</span> file. Implementations MUST reject <span class="st300_term type">SMF/B</span> files that do not start with an <span class="st300_term type">smf</span> section.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.smf.magic"/><div class="st300_subsection_title_number"><a id="st300_p3s5ss3" href="#st300_p3s5ss3" title="Subsection 3.5.3: Magic Number">3.5.3</a></div><div class="st300_subsection_title">Magic Number</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss3c1" href="#st300_p3s5ss3c1" title="Paragraph 3.5.3.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">smf</span> section is identified by the magic number <span class="st300_term constant">0x534D465F48454144</span>.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.smf.data"/><div class="st300_subsection_title_number"><a id="st300_p3s5ss4" href="#st300_p3s5ss4" title="Subsection 3.5.4: Data">3.5.4</a></div><div class="st300_subsection_title">Data</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c1" href="#st300_p3s5ss4c1" title="Paragraph 3.5.4.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">smf</span> section begins with the following structure:</div></div><div class="st300_formal_item"><a id="smfb.sections.smf.header.def"/><div class="st300_formal_item_title"><a id="st300_p3s5ss4c2" href="#st300_p3s5ss4c2" title="Formal item 3.5.4.2: SMF Header">3.5.4.2 SMF Header</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">[record SMFBv1_0Header
  ([field fields_size              [integer unsigned 32]]
   [field schema                   SMFBv1SchemaID]
   [padding-octets                 4]
   [field vertex_count             [integer unsigned 64]]
   [field triangle_count           [integer unsigned 64]]
   [field triangle_index_size_bits [integer unsigned 32]]
   [field attribute_count          [integer unsigned 32]]
   [field coordinate_system        SMFBv1CoordinateSystems]
   [padding-octets                 14])]
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c3" href="#st300_p3s5ss4c3" title="Paragraph 3.5.4.3">3</a></div><div class="st300_paragraph">The <span class="st300_term field">fields_size</span> field specifies the total size of the header fields, after which a list of attributes will be declared. The purpose of this field is to allow for forward compatibility: Future updates to this specification may add extra fields to the end of the header structure, and the value of this field allows older implementations to skip those newer fields.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c4" href="#st300_p3s5ss4c4" title="Paragraph 3.5.4.4">4</a></div><div class="st300_paragraph">The <span class="st300_term field">schema</span> field specifies the <a class="st300_link" href="p2s8.xhtml#smf_model.schema_id">schema identifier</a> for the model:</div></div><div class="st300_formal_item"><a id="smfb.sections.smf.header.schema_id.def"/><div class="st300_formal_item_title"><a id="st300_p3s5ss4c5" href="#st300_p3s5ss4c5" title="Formal item 3.5.4.5: Schema Identifier">3.5.4.5 Schema Identifier</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">[record SMFBv1SchemaID
  ([field schema_id            [string 64 "UTF-8"]]
   [field schema_version_major [integer unsigned 32]]
   [field schema_version_minor [integer unsigned 32]]
   [padding-octets             4])]
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c6" href="#st300_p3s5ss4c6" title="Paragraph 3.5.4.6">6</a></div><div class="st300_paragraph">If the length of the <span class="st300_term field">schema_id</span> field is <span class="st300_term constant">0</span>, the schema identifier as a whole is ignored.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c7" href="#st300_p3s5ss4c7" title="Paragraph 3.5.4.7">7</a></div><div class="st300_paragraph">The <span class="st300_term field">vertex_count</span> field specifies the number of vertices that will be specified in a <a class="st300_link" href="p3s7.xhtml#smfb.sections.vertices-noninterleaved">vertices-noninterleaved</a> section. Parsers MUST raise an appropriate error if a non-zero vertex count is specified but no vertices are actually provided in any following section.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c8" href="#st300_p3s5ss4c8" title="Paragraph 3.5.4.8">8</a></div><div class="st300_paragraph">The <span class="st300_term field">triangle_count</span> field specifies the number of triangles that will be specified in a <a class="st300_link" href="p3s6.xhtml#smfb.sections.triangles">triangles</a> section. The <span class="st300_term field">triangle_size</span> field specifies the size in bits of the individual vertex indices within each triangle. Parsers MUST raise an appropriate error if a non-zero triangle count is specified but no triangles are actually provided in any following section.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c9" href="#st300_p3s5ss4c9" title="Paragraph 3.5.4.9">9</a></div><div class="st300_paragraph">The <span class="st300_term field">attribute_count</span> field specifies the number of <a class="st300_link" href="p2s4.xhtml#smf_model.attribute">attributes</a> that will be declared.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c10" href="#st300_p3s5ss4c10" title="Paragraph 3.5.4.10">10</a></div><div class="st300_paragraph">The <span class="st300_term field">coordinate_system</span> field specifies the <a class="st300_link" href="p2s7.xhtml#smf_model.coords">coordinate system</a> of the model:</div></div><div class="st300_formal_item"><a id="smfb.sections.smf.header.coords.def"/><div class="st300_formal_item_title"><a id="st300_p3s5ss4c11" href="#st300_p3s5ss4c11" title="Formal item 3.5.4.11: Coordinate System">3.5.4.11 Coordinate System</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">[packed SMFBv1CoordinateSystems
  ([field right   [integer unsigned 3]]
   [field up      [integer unsigned 3]]
   [field forward [integer unsigned 3]]
   [field winding [integer unsigned 2]]
   [padding-bits  5])]
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c12" href="#st300_p3s5ss4c12" title="Paragraph 3.5.4.12">12</a></div><div class="st300_paragraph">The <span class="st300_term term">axis</span> and <span class="st300_term term">winding order</span> values are related to integer values via the following functions:</div></div><div class="st300_formal_item"><a id="smfb.sections.smf.header.coords.map"/><div class="st300_formal_item_title"><a id="st300_p3s5ss4c13" href="#st300_p3s5ss4c13" title="Formal item 3.5.4.13: Coordinate System Mapping">3.5.4.13 Coordinate System Mapping</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">import qualified Axis as A

axisOrdinal :: A.Axis -&gt; Integer
axisOrdinal A.PositiveX = 0
axisOrdinal A.PositiveY = 1
axisOrdinal A.PositiveZ = 2
axisOrdinal A.NegativeX = 3
axisOrdinal A.NegativeY = 4
axisOrdinal A.NegativeZ = 5

windingOrdinal :: A.WindingOrder -&gt; Integer
windingOrdinal A.WindingOrderClockwise        = 0
windingOrdinal A.WindingOrderCounterClockwise = 1
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c14" href="#st300_p3s5ss4c14" title="Paragraph 3.5.4.14">14</a></div><div class="st300_paragraph">Directly following the end of the header structure is a series of attribute declarations:</div></div><div class="st300_formal_item"><a id="smfb.sections.smf.header.attribute.def"/><div class="st300_formal_item_title"><a id="st300_p3s5ss4c15" href="#st300_p3s5ss4c15" title="Formal item 3.5.4.15: Attribute">3.5.4.15 Attribute</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">[record SMFBv1Attribute
  ([field name            [string 64 "UTF-8"]]
   [field component_kind  [integer unsigned 32]]
   [field component_count [integer unsigned 32]]
   [field component_size  [integer unsigned 32]])]
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c16" href="#st300_p3s5ss4c16" title="Paragraph 3.5.4.16">16</a></div><div class="st300_paragraph">The <span class="st300_term field">name</span> field specifies the name of the attribute. The <span class="st300_term field">component_kind</span> field specifies the type of the attribute components. The <span class="st300_term field">component_count</span> field specifies the number of components in each value in the attribute, and the <span class="st300_term field">component_size</span> field specifies the size in bits of each component value.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c17" href="#st300_p3s5ss4c17" title="Paragraph 3.5.4.17">17</a></div><div class="st300_paragraph">Attribute component types are related to integer values via the following function:</div></div><div class="st300_formal_item"><a id="smfb.sections.smf.header.attribute.type_map"/><div class="st300_formal_item_title"><a id="st300_p3s5ss4c18" href="#st300_p3s5ss4c18" title="Formal item 3.5.4.18: Attribute Type Mapping">3.5.4.18 Attribute Type Mapping</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">import qualified Attribute as A

attributeTypeOrdinal :: A.ComponentType -&gt; Integer
attributeTypeOrdinal A.IntegerSigned   = 0
attributeTypeOrdinal A.IntegerUnsigned = 1
attributeTypeOrdinal A.FloatingPoint   = 2</pre></div></div></div></div><div class="st300_navbar st300_navbar_bottom"><hr class="st300_hr"/><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="p3s4.xhtml#st300_p3s4" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="p3.xhtml#st300_p3" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"><a rel="next" href="p3s6.xhtml#st300_p3s6" title="Go to next page">Next</a></td></tr><tr><td class="st300_navbar_prev_title_cell">3.4. Section - end</td><td class="st300_navbar_up_title_cell">3. SMF/B - Binary Encoding</td><td class="st300_navbar_next_title_cell">3.6. Section - triangles</td></tr></table></div></div></body></html>

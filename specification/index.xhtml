<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>com.io7m.smfj 0.11.0 Specification</title><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8"/><link rel="stylesheet" type="text/css" href="kstructural-layout.css"/><link rel="stylesheet" type="text/css" href="kstructural-colour.css"/><link rel="stylesheet" type="text/css" href="specification.css"/></head><body><div class="st300_body"><div class="st300_document_title">com.io7m.smfj 0.11.0 Specification</div><ul class="st300_contents st300_document_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_part"><a href="#st300_p1" title="Link to part 1: Notational Conventions">1. Notational Conventions</a><ul class="st300_contents st300_part_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p1s1" title="Link to section 1.1: Overview">1.1. Overview</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p1s2" title="Link to section 1.2: Unicode">1.2. Unicode</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p1s3" title="Link to section 1.3: EBNF">1.3. EBNF</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p1s4" title="Link to section 1.4: Haskell">1.4. Haskell</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p1s5" title="Link to section 1.5: JPRA">1.5. JPRA</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p1s6" title="Link to section 1.6: Requirement Levels">1.6. Requirement Levels</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_part"><a href="#st300_p2" title="Link to part 2: Model">2. Model</a><ul class="st300_contents st300_part_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p2s1" title="Link to section 2.1: Overview">2.1. Overview</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p2s2" title="Link to section 2.2: Versioning">2.2. Versioning</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p2s3" title="Link to section 2.3: Mesh">2.3. Mesh</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p2s4" title="Link to section 2.4: Attributes">2.4. Attributes</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p2s5" title="Link to section 2.5: Vertices">2.5. Vertices</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p2s6" title="Link to section 2.6: Triangles">2.6. Triangles</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p2s7" title="Link to section 2.7: Coordinate System">2.7. Coordinate System</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p2s8" title="Link to section 2.8: Schema ID">2.8. Schema ID</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p2s9" title="Link to section 2.9: Metadata">2.9. Metadata</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_part"><a href="#st300_p3" title="Link to part 3: SMF/B - Binary Encoding">3. SMF/B - Binary Encoding</a><ul class="st300_contents st300_part_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p3s1" title="Link to section 3.1: Overview">3.1. Overview</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p3s2" title="Link to section 3.2: Header">3.2. Header</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p3s3" title="Link to section 3.3: Sections">3.3. Sections</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p3s4" title="Link to section 3.4: Section - end">3.4. Section - end</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p3s5" title="Link to section 3.5: Section - smf">3.5. Section - smf</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p3s6" title="Link to section 3.6: Section - triangles">3.6. Section - triangles</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p3s7" title="Link to section 3.7: Section - vertices-noninterleaved">3.7. Section - vertices-noninterleaved</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p3s8" title="Link to section 3.8: Section - metadata">3.8. Section - metadata</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p3s9" title="Link to section 3.9: Example">3.9. Example</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_part"><a href="#st300_p4" title="Link to part 4: SMF/T - Text Encoding">4. SMF/T - Text Encoding</a><ul class="st300_contents st300_part_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p4s1" title="Link to section 4.1: Overview">4.1. Overview</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p4s2" title="Link to section 4.2: Sections">4.2. Sections</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p4s3" title="Link to section 4.3: Section - smf">4.3. Section - smf</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p4s4" title="Link to section 4.4: Section - triangles">4.4. Section - triangles</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p4s5" title="Link to section 4.5: Section - vertices-noninterleaved">4.5. Section - vertices-noninterleaved</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p4s6" title="Link to section 4.6: Section - metadata">4.6. Section - metadata</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p4s7" title="Link to section 4.7: Example">4.7. Example</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_part"><a href="#st300_p5" title="Link to part 5: Specification History">5. Specification History</a><ul class="st300_contents st300_part_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_section"><a href="#st300_p5s1" title="Link to section 5.1: History">5.1. History</a></li></ul></li></ul><div class="st300_part_container"><a id="conventions"/><div class="st300_part_title_number"><a id="st300_p1" href="#st300_p1" title="Part 1: Notational Conventions">1</a></div><div class="st300_part_title">Notational Conventions</div><ul class="st300_contents st300_part_contents_outer st300_part_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p1s1" title="Link to section 1.1: Overview">1.1. Overview</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p1s2" title="Link to section 1.2: Unicode">1.2. Unicode</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p1s3" title="Link to section 1.3: EBNF">1.3. EBNF</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p1s4" title="Link to section 1.4: Haskell">1.4. Haskell</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p1s5" title="Link to section 1.5: JPRA">1.5. JPRA</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p1s6" title="Link to section 1.6: Requirement Levels">1.6. Requirement Levels</a></li></ul><div class="st300_section_container"><a id="conventions.overview"/><div class="st300_section_title_number"><a id="st300_p1s1" href="#st300_p1s1" title="Section 1.1: Overview">1.1</a></div><div class="st300_section_title">Overview</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p1s1c1" href="#st300_p1s1c1" title="Paragraph 1.1.1">1</a></div><div class="st300_paragraph">This section of the specification documents all notational conventions used throughout.</div></div></div><div class="st300_section_container"><a id="conventions.unicode"/><div class="st300_section_title_number"><a id="st300_p1s2" href="#st300_p1s2" title="Section 1.2: Unicode">1.2</a></div><div class="st300_section_title">Unicode</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p1s2c1" href="#st300_p1s2c1" title="Paragraph 1.2.1">1</a></div><div class="st300_paragraph">The specification makes reference to the Unicode character set which, at the time of writing, is at version <span class="st300_term constant">9.0</span>. The specification often references specific Unicode characters, and does so using the standard notation <span class="st300_term constant">U+NNNN</span>, where <span class="st300_term variable">N</span> represents a hexadecimal digit. For example, <span class="st300_term constant">U+03BB</span> corresponds to the lowercase lambda symbol <span class="st300_term constant">λ</span>.</div></div></div><div class="st300_section_container"><a id="conventions.ebnf"/><div class="st300_section_title_number"><a id="st300_p1s3" href="#st300_p1s3" title="Section 1.3: EBNF">1.3</a></div><div class="st300_section_title">EBNF</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p1s3c1" href="#st300_p1s3c1" title="Paragraph 1.3.1">1</a></div><div class="st300_paragraph">The specification gives grammar definitions in <span class="st300_term package">ISO/IEC 14977:1996</span> Extended Backus-Naur form.</div></div></div><div class="st300_section_container"><a id="conventions.haskell"/><div class="st300_section_title_number"><a id="st300_p1s4" href="#st300_p1s4" title="Section 1.4: Haskell">1.4</a></div><div class="st300_section_title">Haskell</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p1s4c1" href="#st300_p1s4c1" title="Paragraph 1.4.1">1</a></div><div class="st300_paragraph">Rather than rely on untyped and ambiguous mathematical notation, this documentation expresses all mathematics and type definitions in strict <a class="st300_link_external" href="http://www.haskell.org/onlinereport/haskell2010/">Haskell 2010</a> with no extensions. All Haskell sources are included along with the documentation and can therefore be executed from the command line <a class="st300_link_external" href="http://www.haskell.org/haskellwiki/GHC/GHCi">GHCi</a> tool in order to interactively check results and experiment with functions.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p1s4c2" href="#st300_p1s4c2" title="Paragraph 1.4.2">2</a></div><div class="st300_paragraph">When used within prose, functions are referred to using fully qualified notation, such as <span class="st300_term expression">(Vector3f.cross n t)</span>. This is the application of the <span class="st300_term function">cross</span> function defined in the <span class="st300_term package">Vector3f</span> module, to the arguments <span class="st300_term variable">n</span> and <span class="st300_term variable">t</span>.</div></div></div><div class="st300_section_container"><a id="conventions.jpra"/><div class="st300_section_title_number"><a id="st300_p1s5" href="#st300_p1s5" title="Section 1.5: JPRA">1.5</a></div><div class="st300_section_title">JPRA</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p1s5c1" href="#st300_p1s5c1" title="Paragraph 1.5.1">1</a></div><div class="st300_paragraph">Definitions of binary structures are given as <a class="st300_link_external" href="http://io7m.github.io/jpra/">jpra</a> language definitions. All values are considered to be in big-endian byte order unless otherwise specified.</div></div></div><div class="st300_section_container"><a id="conventions.reqs"/><div class="st300_section_title_number"><a id="st300_p1s6" href="#st300_p1s6" title="Section 1.6: Requirement Levels">1.6</a></div><div class="st300_section_title">Requirement Levels</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p1s6c1" href="#st300_p1s6c1" title="Paragraph 1.6.1">1</a></div><div class="st300_paragraph">This specification uses terms such as MUST, MUST NOT, SHOULD, SHOULD NOT, etc, according to the definitions given in <a class="st300_link_external" href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>.</div></div></div></div><div class="st300_part_container"><a id="smf_model.model"/><div class="st300_part_title_number"><a id="st300_p2" href="#st300_p2" title="Part 2: Model">2</a></div><div class="st300_part_title">Model</div><ul class="st300_contents st300_part_contents_outer st300_part_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p2s1" title="Link to section 2.1: Overview">2.1. Overview</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p2s2" title="Link to section 2.2: Versioning">2.2. Versioning</a><ul class="st300_contents st300_section_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p2s2ss1" title="Link to subsection 2.2.1: Overview">2.2.1. Overview</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p2s2ss2" title="Link to subsection 2.2.2: Forward Compatibility">2.2.2. Forward Compatibility</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p2s2ss3" title="Link to subsection 2.2.3: Backward Compatibility">2.2.3. Backward Compatibility</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p2s2ss4" title="Link to subsection 2.2.4: Compatibility">2.2.4. Compatibility</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p2s3" title="Link to section 2.3: Mesh">2.3. Mesh</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p2s4" title="Link to section 2.4: Attributes">2.4. Attributes</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p2s5" title="Link to section 2.5: Vertices">2.5. Vertices</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p2s6" title="Link to section 2.6: Triangles">2.6. Triangles</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p2s7" title="Link to section 2.7: Coordinate System">2.7. Coordinate System</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p2s8" title="Link to section 2.8: Schema ID">2.8. Schema ID</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p2s9" title="Link to section 2.9: Metadata">2.9. Metadata</a></li></ul><div class="st300_section_container"><a id="smf_model.overview"/><div class="st300_section_title_number"><a id="st300_p2s1" href="#st300_p2s1" title="Section 2.1: Overview">2.1</a></div><div class="st300_section_title">Overview</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1c1" href="#st300_p2s1c1" title="Paragraph 2.1.1">1</a></div><div class="st300_paragraph">The SMF model is a minimalist, portable storage model for <span class="st300_term term">triangle mesh data</span>. SMF files are intended to be consumed by 3D rendering engines directly and therefore do not contain any complex interchange features common to formats such as COLLADA <span class="st300_footnote_reference">[<a href="#st300_f_424_0" id="st300_fr_323" title="Jump to footnote smf_model.collada (reference 0)">0</a>]</span>. The <a class="st300_link" href="#smft">text</a> and <a class="st300_link" href="#smfb">binary</a> encodings of the model are designed to be trivial to parse and to permit the easy construction of extremely fast event-based parsers that do not require loading the entire file into memory for processing.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1c2" href="#st300_p2s1c2" title="Paragraph 2.1.2">2</a></div><div class="st300_paragraph">The format is <a class="st300_link" href="#smf_model.versioning">versioned</a>, and is specified in a manner that allows for implementations to provide strong guarantees of <span class="st300_term term">forwards</span> and <span class="st300_term term">backwards</span> compatibility as the specification evolves.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s1c3" href="#st300_p2s1c3" title="Paragraph 2.1.3">3</a></div><div class="st300_paragraph">The version of the SMF model described by this specification is <span class="st300_term expression">(1, 0)</span>. See <a class="st300_link" href="#smf_model.versioning">versioning</a> for details.</div></div></div><div class="st300_section_container"><a id="smf_model.versioning"/><div class="st300_section_title_number"><a id="st300_p2s2" href="#st300_p2s2" title="Section 2.2: Versioning">2.2</a></div><div class="st300_section_title">Versioning</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p2s2ss1" title="Link to subsection 2.2.1: Overview">2.2.1. Overview</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p2s2ss2" title="Link to subsection 2.2.2: Forward Compatibility">2.2.2. Forward Compatibility</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p2s2ss3" title="Link to subsection 2.2.3: Backward Compatibility">2.2.3. Backward Compatibility</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p2s2ss4" title="Link to subsection 2.2.4: Compatibility">2.2.4. Compatibility</a></li></ul><div class="st300_subsection_container"><div class="st300_subsection_title_number"><a id="st300_p2s2ss1" href="#st300_p2s2ss1" title="Subsection 2.2.1: Overview">2.2.1</a></div><div class="st300_subsection_title">Overview</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s2ss1c1" href="#st300_p2s2ss1c1" title="Paragraph 2.2.1.1">1</a></div><div class="st300_paragraph">The SMF specification is versioned via a restricted subset of the <a class="st300_link_external" href="http://semver.org/">Semantic Versioning</a> specification. The SMF specification has a <span class="st300_term term">major</span> and <span class="st300_term term">minor</span> version number, with <span class="st300_term term">major</span> version increments denoting incompatible changes, and <span class="st300_term term">minor</span> version increments denoting new functionality. There is no <span class="st300_term term">patch</span> version number. A version of the specification with <span class="st300_term term">major</span> version <span class="st300_term variable">m</span> and <span class="st300_term term">minor</span> version <span class="st300_term variable">n</span> is denoted as specification version <span class="st300_term expression">(m, n)</span>.</div></div></div><div class="st300_subsection_container"><a id="smf_model.versioning.fwd"/><div class="st300_subsection_title_number"><a id="st300_p2s2ss2" href="#st300_p2s2ss2" title="Subsection 2.2.2: Forward Compatibility">2.2.2</a></div><div class="st300_subsection_title">Forward Compatibility</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s2ss2c1" href="#st300_p2s2ss2c1" title="Paragraph 2.2.2.1">1</a></div><div class="st300_paragraph">Assuming a version of the SMF specification <span class="st300_term variable">m</span>, an update to the specification that yields version <span class="st300_term variable">n</span> such that <span class="st300_term expression">n &gt; m</span> is considered to be <span class="st300_term term">forwards compatible</span> if a parser that supports format version <span class="st300_term variable">m</span> can read files that were written using format version <span class="st300_term variable">n</span>.</div></div></div><div class="st300_subsection_container"><a id="smf_model.versioning.bwd"/><div class="st300_subsection_title_number"><a id="st300_p2s2ss3" href="#st300_p2s2ss3" title="Subsection 2.2.3: Backward Compatibility">2.2.3</a></div><div class="st300_subsection_title">Backward Compatibility</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s2ss3c1" href="#st300_p2s2ss3c1" title="Paragraph 2.2.3.1">1</a></div><div class="st300_paragraph">Assuming a version of the SMF specification <span class="st300_term variable">m</span>, an update to the specification that yields version <span class="st300_term variable">n</span> such that <span class="st300_term expression">n &gt; m</span> is considered to be <span class="st300_term term">backwards compatible</span> if a parser that supports format version <span class="st300_term variable">n</span> can read files that were written using format version <span class="st300_term variable">m</span>.</div></div></div><div class="st300_subsection_container"><a id="smf_model.versioning.cmp"/><div class="st300_subsection_title_number"><a id="st300_p2s2ss4" href="#st300_p2s2ss4" title="Subsection 2.2.4: Compatibility">2.2.4</a></div><div class="st300_subsection_title">Compatibility</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s2ss4c1" href="#st300_p2s2ss4c1" title="Paragraph 2.2.4.1">1</a></div><div class="st300_paragraph">The SMF specification is designed such that a correctly-written parser implementation that supports a <span class="st300_term term">major</span> version <span class="st300_term variable">m</span> is able to support the set of versions <span class="st300_term expression">∀n. (m, n)</span>. This implies full forwards and backwards compatibility for parsers when the <span class="st300_term term">major</span> version is unchanged.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s2ss4c2" href="#st300_p2s2ss4c2" title="Paragraph 2.2.4.2">2</a></div><div class="st300_paragraph">Changes that would cause a parser supporting an older version of the specification to fail to read a file written according to a newer version of the specification MUST imply an increment in the <span class="st300_term term">major</span> version of the specification.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s2ss4c3" href="#st300_p2s2ss4c3" title="Paragraph 2.2.4.3">3</a></div><div class="st300_paragraph">Changes that would cause a parser supporting a newer version of the specification to fail to read a file written according to an older version of the specification MUST imply an increment in the <span class="st300_term term">major</span> version of the specification.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s2ss4c4" href="#st300_p2s2ss4c4" title="Paragraph 2.2.4.4">4</a></div><div class="st300_paragraph">An implication of the above rules is that new features added to the specification must be added in a manner that allows them to be ignored by older parsers, lest the <span class="st300_term term">major</span> version of the specification be incremented on every update.</div></div></div></div><div class="st300_section_container"><a id="smf_model.mesh"/><div class="st300_section_title_number"><a id="st300_p2s3" href="#st300_p2s3" title="Section 2.3: Mesh">2.3</a></div><div class="st300_section_title">Mesh</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s3ss4c1" href="#st300_p2s3ss4c1" title="Paragraph 2.3.4.1">1</a></div><div class="st300_paragraph">A <span class="st300_term term">mesh</span> in the SMF model is a set of <a class="st300_link" href="#smf_model.triangle">triangles</a>.</div></div></div><div class="st300_section_container"><a id="smf_model.attribute"/><div class="st300_section_title_number"><a id="st300_p2s4" href="#st300_p2s4" title="Section 2.4: Attributes">2.4</a></div><div class="st300_section_title">Attributes</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s4ss4c1" href="#st300_p2s4ss4c1" title="Paragraph 2.4.4.1">1</a></div><div class="st300_paragraph">An <span class="st300_term term">attribute</span> in the SMF model is a uniquely-named array of elements of a given <span class="st300_term term">type</span>. All attributes within a particular SMF file have the same number of elements. The <span class="st300_term term">type</span> of an attribute is a 3-tuple <span class="st300_term expression">(c, n, s)</span>, where <span class="st300_term expression">c</span> is a <span class="st300_term term">component type</span>, <span class="st300_term expression">n</span> is a <span class="st300_term term">component count</span>, and <span class="st300_term expression">s</span> is a <span class="st300_term term">component size</span> expressed in bits.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s4ss4c2" href="#st300_p2s4ss4c2" title="Paragraph 2.4.4.2">2</a></div><div class="st300_paragraph">This version of the specification defines three basic <span class="st300_term term">component types</span>: <span class="st300_term term">signed integers</span>, <span class="st300_term term">unsigned integers</span>, and <span class="st300_term term">floating point numbers</span>. Floating point numbers are <a class="st300_link_external" href="https://en.wikipedia.org/wiki/IEEE_754">IEEE 754</a> floating point values.</div></div><div class="st300_formal_item"><a id="smf_model.attribute.def"/><div class="st300_formal_item_title"><a id="st300_p2s4ss4c3" href="#st300_p2s4ss4c3" title="Formal item 2.4.4.3: Attribute Type">2.4.4.3 Attribute Type</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">module Attribute where

data ComponentType =
    IntegerSigned
  | IntegerUnsigned
  | FloatingPoint

data AttributeType = AttributeType {
  attribute_component_type  :: ComponentType,
  attribute_component_count :: Word32,
  attribute_component_size  :: Word32
}

data Attribute = Attribute {
  attribute_name :: String,
  attribute_type :: AttributeType
}
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s4ss4c4" href="#st300_p2s4ss4c4" title="Paragraph 2.4.4.4">4</a></div><div class="st300_paragraph">Implementations are required to support attributes of at least the following types:</div></div><div class="st300_formal_item"><a id="smf_model.attribute.types"/><div class="st300_formal_item_title"><a id="st300_p2s4ss4c5" href="#st300_p2s4ss4c5" title="Formal item 2.4.4.5: Types">2.4.4.5 Types</a></div><div class="st300_formal_item_content"><table class="st300_table required_types" summary="Required attribute types"><thead class="st300_table_head"><tr><th class="st300_table_column_name">Component Type</th><th class="st300_table_column_name">Component Count</th><th class="st300_table_column_name">Component size (bits)</th></tr></thead><tbody class="st300_table_body"><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">1</td><td class="st300_table_cell">8</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">2</td><td class="st300_table_cell">8</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">3</td><td class="st300_table_cell">8</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">4</td><td class="st300_table_cell">8</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">1</td><td class="st300_table_cell">16</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">2</td><td class="st300_table_cell">16</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">3</td><td class="st300_table_cell">16</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">4</td><td class="st300_table_cell">16</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">1</td><td class="st300_table_cell">32</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">2</td><td class="st300_table_cell">32</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">3</td><td class="st300_table_cell">32</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">4</td><td class="st300_table_cell">32</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">1</td><td class="st300_table_cell">64</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">2</td><td class="st300_table_cell">64</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">3</td><td class="st300_table_cell">64</td></tr><tr><td class="st300_table_cell">Signed integer</td><td class="st300_table_cell">4</td><td class="st300_table_cell">64</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">1</td><td class="st300_table_cell">8</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">2</td><td class="st300_table_cell">8</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">3</td><td class="st300_table_cell">8</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">4</td><td class="st300_table_cell">8</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">1</td><td class="st300_table_cell">16</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">2</td><td class="st300_table_cell">16</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">3</td><td class="st300_table_cell">16</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">4</td><td class="st300_table_cell">16</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">1</td><td class="st300_table_cell">32</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">2</td><td class="st300_table_cell">32</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">3</td><td class="st300_table_cell">32</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">4</td><td class="st300_table_cell">32</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">1</td><td class="st300_table_cell">64</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">2</td><td class="st300_table_cell">64</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">3</td><td class="st300_table_cell">64</td></tr><tr><td class="st300_table_cell">Unsigned integer</td><td class="st300_table_cell">4</td><td class="st300_table_cell">64</td></tr><tr><td class="st300_table_cell">IEEE754 floating point</td><td class="st300_table_cell">1</td><td class="st300_table_cell">16</td></tr><tr><td class="st300_table_cell">IEEE754 floating point</td><td class="st300_table_cell">2</td><td class="st300_table_cell">16</td></tr><tr><td class="st300_table_cell">IEEE754 floating point</td><td class="st300_table_cell">3</td><td class="st300_table_cell">16</td></tr><tr><td class="st300_table_cell">IEEE754 floating point</td><td class="st300_table_cell">4</td><td class="st300_table_cell">16</td></tr><tr><td class="st300_table_cell">IEEE754 floating point</td><td class="st300_table_cell">1</td><td class="st300_table_cell">32</td></tr><tr><td class="st300_table_cell">IEEE754 floating point</td><td class="st300_table_cell">2</td><td class="st300_table_cell">32</td></tr><tr><td class="st300_table_cell">IEEE754 floating point</td><td class="st300_table_cell">3</td><td class="st300_table_cell">32</td></tr><tr><td class="st300_table_cell">IEEE754 floating point</td><td class="st300_table_cell">4</td><td class="st300_table_cell">32</td></tr><tr><td class="st300_table_cell">IEEE754 floating point</td><td class="st300_table_cell">1</td><td class="st300_table_cell">64</td></tr><tr><td class="st300_table_cell">IEEE754 floating point</td><td class="st300_table_cell">2</td><td class="st300_table_cell">64</td></tr><tr><td class="st300_table_cell">IEEE754 floating point</td><td class="st300_table_cell">3</td><td class="st300_table_cell">64</td></tr><tr><td class="st300_table_cell">IEEE754 floating point</td><td class="st300_table_cell">4</td><td class="st300_table_cell">64</td></tr></tbody></table></div></div></div><div class="st300_section_container"><a id="smf_model.vertex"/><div class="st300_section_title_number"><a id="st300_p2s5" href="#st300_p2s5" title="Section 2.5: Vertices">2.5</a></div><div class="st300_section_title">Vertices</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s5ss4c1" href="#st300_p2s5ss4c1" title="Paragraph 2.5.4.1">1</a></div><div class="st300_paragraph">A <span class="st300_term term">vertex</span> is an abstract object consisting of exactly one element taken from each of the defined <a class="st300_link" href="#smf_model.attribute">attributes</a>. A vertex can essentially be considered to be an array index; The vertex at index <span class="st300_term expression">n</span> can be considered to be the aggregation of the <span class="st300_term expression">nth</span> elements of all of the defined attributes. Vertices are numbered starting at <span class="st300_term expression">0</span>.</div></div></div><div class="st300_section_container"><a id="smf_model.triangle"/><div class="st300_section_title_number"><a id="st300_p2s6" href="#st300_p2s6" title="Section 2.6: Triangles">2.6</a></div><div class="st300_section_title">Triangles</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s6ss4c1" href="#st300_p2s6ss4c1" title="Paragraph 2.6.4.1">1</a></div><div class="st300_paragraph">A triangle is a 3-tuple of <a class="st300_link" href="#smf_model.vertex">vertices</a>. In the SMF model, a triangle references vertices by their numeric index.</div></div></div><div class="st300_section_container"><a id="smf_model.coords"/><div class="st300_section_title_number"><a id="st300_p2s7" href="#st300_p2s7" title="Section 2.7: Coordinate System">2.7</a></div><div class="st300_section_title">Coordinate System</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s7ss4c1" href="#st300_p2s7ss4c1" title="Paragraph 2.7.4.1">1</a></div><div class="st300_paragraph">A <span class="st300_term term">coordinate system</span> in the SMF model is a set of three axis names and a triangle <span class="st300_term term">winding order</span>. The axis names specify which Cartesian coordinate system axes correspond to the <span class="st300_term term">right</span>, <span class="st300_term term">up</span>, and <span class="st300_term term">forward</span> directions. The winding order specifies whether vertices for triangles are given in clockwise or counter-clockwise order. A coordinate system is only <span class="st300_term term">valid</span> if the three chosen axes have different <span class="st300_term term">axis names</span>. The <span class="st300_term function">axisName</span> function relates an axis to an axis name. The <span class="st300_term function">axisValid</span> function gives a formal definition of the validity of sets of axes.</div></div><div class="st300_formal_item"><a id="smf_model.coords.axis_def"/><div class="st300_formal_item_title"><a id="st300_p2s7ss4c2" href="#st300_p2s7ss4c2" title="Formal item 2.7.4.2: Axis">2.7.4.2 Axis</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">module Axis where

data Axis
  = PositiveX
  | PositiveY
  | PositiveZ
  | NegativeX
  | NegativeY
  | NegativeZ

data AxisName
  = AxisX
  | AxisY
  | AxisZ

axisName :: Axis -&gt; AxisName
axisName PositiveX = AxisX
axisName NegativeX = AxisX
axisName PositiveY = AxisY
axisName NegativeY = AxisY
axisName PositiveZ = AxisZ
axisName NegativeZ = AxisZ

data AxisSystem = AxisSystem {
  axis_right   :: Axis,
  axis_up      :: Axis,
  axis_forward :: Axis
}

axisValid :: (Axis, Axis, Axis) -&gt; Bool
axisValid (right, up, forward) =
  case (axisName right, axisName up, axisName forward) of
    (AxisX, AxisY, AxisZ) -&gt; True
    (AxisZ, AxisX, AxisY) -&gt; True
    (AxisY, AxisZ, AxisX) -&gt; True
    _                     -&gt; False

data WindingOrder
  = WindingOrderClockwise
  | WindingOrderCounterClockwise

data CoordinateSystem = CoordinateSystem {
  coords_axes  :: AxisSystem,
  coords_order :: WindingOrder
}</pre></div></div></div><div class="st300_section_container"><a id="smf_model.schema_id"/><div class="st300_section_title_number"><a id="st300_p2s8" href="#st300_p2s8" title="Section 2.8: Schema ID">2.8</a></div><div class="st300_section_title">Schema ID</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s8ss4c1" href="#st300_p2s8ss4c1" title="Paragraph 2.8.4.1">1</a></div><div class="st300_paragraph">A <span class="st300_term term">schema identifier</span> is an optional identifier that can be inserted into SMF files. Because the SMF model does not predefine any particular <a class="st300_link" href="#smf_model.attribute">attributes</a>, tools that consume SMF files cannot know ahead of time if the file they have just loaded will actually contain the attributes that they are expecting. A <span class="st300_term term">schema identifier</span> effectively provides a concrete name for a set of attributes so that tools that process SMF files can perform validation of attributes based on the identifier. It is somewhat analogous to XML namespace <span class="st300_footnote_reference">[<a href="#st300_f_1809_0" id="st300_fr_1705" title="Jump to footnote smf_model.xmlns (reference 0)">1</a>]</span> declarations; The author of a particular document inserts an XML namespace identifier into their document, and validation tools use this identifier to locate schema definitions against which the document is then validated.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s8ss4c2" href="#st300_p2s8ss4c2" title="Paragraph 2.8.4.2">2</a></div><div class="st300_paragraph">A schema identifier consists of a string and two integer values:</div></div><div class="st300_formal_item"><a id="smf_model.schema_id.def"/><div class="st300_formal_item_title"><a id="st300_p2s8ss4c3" href="#st300_p2s8ss4c3" title="Formal item 2.8.4.3: Schema Identifier">2.8.4.3 Schema Identifier</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">data SchemaIdentifier = SchemaIdentifier {
  schema_id            :: String,
  schema_version_major :: Word32,
  schema_version_minor :: Word32
}
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s8ss4c4" href="#st300_p2s8ss4c4" title="Paragraph 2.8.4.4">4</a></div><div class="st300_paragraph">The <span class="st300_term term">schema_id</span> uniquely identifies the schema, and the <span class="st300_term term">schema_version_major</span> and <span class="st300_term term">schema_version_minor</span> values identify the version of the schema.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s8ss4c5" href="#st300_p2s8ss4c5" title="Paragraph 2.8.4.5">5</a></div><div class="st300_paragraph">Schema names may be at most <span class="st300_term constant">64</span> characters in length and must conform to the following syntax:</div></div><div class="st300_formal_item"><a id="smf_model.schema_id.name_syntax"/><div class="st300_formal_item_title"><a id="st300_p2s8ss4c6" href="#st300_p2s8ss4c6" title="Formal item 2.8.4.6: Schema Name Syntax">2.8.4.6 Schema Name Syntax</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">schema_segment =
  ? [\p{IsAlphabetic}][\p{IsAlphabetic}\p{IsDigit}_]* ? ;

schema_name =
  schema_segment , { "." , schema_segment } ;
</pre></div></div></div><div class="st300_section_container"><a id="smf_model.metadata"/><div class="st300_section_title_number"><a id="st300_p2s9" href="#st300_p2s9" title="Section 2.9: Metadata">2.9</a></div><div class="st300_section_title">Metadata</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s9ss4c1" href="#st300_p2s9ss4c1" title="Paragraph 2.9.4.1">1</a></div><div class="st300_paragraph">The SMF model supports the inclusion of arbitrary metadata. A <span class="st300_term term">metadata value</span> is an opaque data value with a <span class="st300_term term">schema</span> identifier specified in the same manner as the <a class="st300_link" href="#smf_model.schema_id">schema identifier</a>. Applications may use the metadata facilities to associate small amounts of extra information with mesh data. Typical uses include checksums, copyright information, and generating software package version information.</div></div></div></div><div class="st300_part_container"><a id="smfb"/><div class="st300_part_title_number"><a id="st300_p3" href="#st300_p3" title="Part 3: SMF/B - Binary Encoding">3</a></div><div class="st300_part_title">SMF/B - Binary Encoding</div><ul class="st300_contents st300_part_contents_outer st300_part_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p3s1" title="Link to section 3.1: Overview">3.1. Overview</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p3s2" title="Link to section 3.2: Header">3.2. Header</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p3s3" title="Link to section 3.3: Sections">3.3. Sections</a><ul class="st300_contents st300_section_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s3ss1" title="Link to subsection 3.3.1: Definition">3.3.1. Definition</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s3ss2" title="Link to subsection 3.3.2: Alignment">3.3.2. Alignment</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s3ss3" title="Link to subsection 3.3.3: Available Sections">3.3.3. Available Sections</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s3ss4" title="Link to subsection 3.3.4: Enumerating Sections">3.3.4. Enumerating Sections</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p3s4" title="Link to section 3.4: Section - end">3.4. Section - end</a><ul class="st300_contents st300_section_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s4ss1" title="Link to subsection 3.4.1: Definition">3.4.1. Definition</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s4ss2" title="Link to subsection 3.4.2: Cardinality/Ordering">3.4.2. Cardinality/Ordering</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s4ss3" title="Link to subsection 3.4.3: Magic Number">3.4.3. Magic Number</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s4ss4" title="Link to subsection 3.4.4: Data">3.4.4. Data</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p3s5" title="Link to section 3.5: Section - smf">3.5. Section - smf</a><ul class="st300_contents st300_section_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s5ss1" title="Link to subsection 3.5.1: Definition">3.5.1. Definition</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s5ss2" title="Link to subsection 3.5.2: Cardinality/Ordering">3.5.2. Cardinality/Ordering</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s5ss3" title="Link to subsection 3.5.3: Magic Number">3.5.3. Magic Number</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s5ss4" title="Link to subsection 3.5.4: Data">3.5.4. Data</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p3s6" title="Link to section 3.6: Section - triangles">3.6. Section - triangles</a><ul class="st300_contents st300_section_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s6ss1" title="Link to subsection 3.6.1: Definition">3.6.1. Definition</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s6ss2" title="Link to subsection 3.6.2: Cardinality/Ordering">3.6.2. Cardinality/Ordering</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s6ss3" title="Link to subsection 3.6.3: Magic Number">3.6.3. Magic Number</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s6ss4" title="Link to subsection 3.6.4: Data">3.6.4. Data</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p3s7" title="Link to section 3.7: Section - vertices-noninterleaved">3.7. Section - vertices-noninterleaved</a><ul class="st300_contents st300_section_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s7ss1" title="Link to subsection 3.7.1: Definition">3.7.1. Definition</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s7ss2" title="Link to subsection 3.7.2: Cardinality/Ordering">3.7.2. Cardinality/Ordering</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s7ss3" title="Link to subsection 3.7.3: Magic Number">3.7.3. Magic Number</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s7ss4" title="Link to subsection 3.7.4: Data">3.7.4. Data</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p3s8" title="Link to section 3.8: Section - metadata">3.8. Section - metadata</a><ul class="st300_contents st300_section_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s8ss1" title="Link to subsection 3.8.1: Definition">3.8.1. Definition</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s8ss2" title="Link to subsection 3.8.2: Cardinality/Ordering">3.8.2. Cardinality/Ordering</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s8ss3" title="Link to subsection 3.8.3: Magic Number">3.8.3. Magic Number</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p3s8ss4" title="Link to subsection 3.8.4: Data">3.8.4. Data</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p3s9" title="Link to section 3.9: Example">3.9. Example</a></li></ul><div class="st300_section_container"><a id="smfb.overview"/><div class="st300_section_title_number"><a id="st300_p3s1" href="#st300_p3s1" title="Section 3.1: Overview">3.1</a></div><div class="st300_section_title">Overview</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s1c1" href="#st300_p3s1c1" title="Paragraph 3.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">SMF/B</span> format is a binary encoding for the <a class="st300_link" href="#smf_model.model">SMF model</a>.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s1c2" href="#st300_p3s1c2" title="Paragraph 3.1.2">2</a></div><div class="st300_paragraph">An <span class="st300_term type">SMF/B</span> file begins with a simple fixed-size <a class="st300_link" href="#smfb.header">header</a> followed by a series of <a class="st300_link" href="#smfb.sections">sections</a> containing data and metadata.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s1c3" href="#st300_p3s1c3" title="Paragraph 3.1.3">3</a></div><div class="st300_paragraph">All data in an <span class="st300_term type">SMF/B</span> file is written in <span class="st300_term term">big-endian</span> byte order.</div></div></div><div class="st300_section_container"><a id="smfb.header"/><div class="st300_section_title_number"><a id="st300_p3s2" href="#st300_p3s2" title="Section 3.2: Header">3.2</a></div><div class="st300_section_title">Header</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s2c1" href="#st300_p3s2c1" title="Paragraph 3.2.1">1</a></div><div class="st300_paragraph">An <span class="st300_term type">SMF/B</span> file begins with the following fixed-size structure:</div></div><div class="st300_formal_item"><a id="smfb.header.def"/><div class="st300_formal_item_title"><a id="st300_p3s2c2" href="#st300_p3s2c2" title="Formal item 3.2.2: SMF/B Header">3.2.2 SMF/B Header</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">[record SMFBHeaderStart
  ([field magic           [integer unsigned 64]]
   [field version_major   [integer unsigned 32]]
   [field version_minor   [integer unsigned 32]])]
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s2c3" href="#st300_p3s2c3" title="Paragraph 3.2.3">3</a></div><div class="st300_paragraph">The value of the <span class="st300_term field">magic</span> field MUST be <span class="st300_term constant">0x89534D460D0A1A0A</span>. Implementations MUST immediately reject any files that do not begin with this magic number. The derivation of this constant is taken almost verbatim from the PNG <span class="st300_footnote_reference">[<a href="#st300_f_2035_0" id="st300_fr_2020" title="Jump to footnote smfb.png (reference 0)">2</a>]</span> file format with the characters <span class="st300_term constant">PNG</span> changed to <span class="st300_term constant">SMF</span>.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s2c4" href="#st300_p3s2c4" title="Paragraph 3.2.4">4</a></div><div class="st300_paragraph">The <span class="st300_term field">version_major</span> field specifies the <a class="st300_link" href="#smf_model.versioning">major</a> version number of the specification to which the data in the file is expected to conform. The <span class="st300_term field">version_minor</span> field specifies the <a class="st300_link" href="#smf_model.versioning">minor</a> version number of the specification to which the data in the file is expected to conform.</div></div></div><div class="st300_section_container"><a id="smfb.sections"/><div class="st300_section_title_number"><a id="st300_p3s3" href="#st300_p3s3" title="Section 3.3: Sections">3.3</a></div><div class="st300_section_title">Sections</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s3ss1" title="Link to subsection 3.3.1: Definition">3.3.1. Definition</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s3ss2" title="Link to subsection 3.3.2: Alignment">3.3.2. Alignment</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s3ss3" title="Link to subsection 3.3.3: Available Sections">3.3.3. Available Sections</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s3ss4" title="Link to subsection 3.3.4: Enumerating Sections">3.3.4. Enumerating Sections</a></li></ul><div class="st300_subsection_container"><a id="smfb.sections.def"/><div class="st300_subsection_title_number"><a id="st300_p3s3ss1" href="#st300_p3s3ss1" title="Subsection 3.3.1: Definition">3.3.1</a></div><div class="st300_subsection_title">Definition</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s3ss1c1" href="#st300_p3s3ss1c1" title="Paragraph 3.3.1.1">1</a></div><div class="st300_paragraph">Directly following the <a class="st300_link" href="#smfb.header">header</a>, an <span class="st300_term type">SMF/B</span> file consists of a series of <span class="st300_term term">sections</span>. A <span class="st300_term term">section</span> begins with the following fixed-size structure:</div></div><div class="st300_formal_item"><a id="smfb.sections.def.header"/><div class="st300_formal_item_title"><a id="st300_p3s3ss1c2" href="#st300_p3s3ss1c2" title="Formal item 3.3.1.2: Section header">3.3.1.2 Section header</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">[record SMFBSection
  ([field id   [integer unsigned 64]]
   [field size [integer unsigned 64]])]
</pre></div></div><div class="st300_paragraph_container"><a id="smfb.sections.def.size"/><div class="st300_paragraph_number"><a id="st300_p3s3ss1c3" href="#st300_p3s3ss1c3" title="Paragraph 3.3.1.3">3</a></div><div class="st300_paragraph">The <span class="st300_term field">id</span> field of the section header identifies the type of the section. The <span class="st300_term field">size</span> field of the section header specifies the <span class="st300_term term">data size</span>; the size in octets of the data that follows the section header. The <span class="st300_term term">data size</span> necessarily includes any trailing <span class="st300_term term">padding octets</span> that may be inserted in order to guarantee that the start of the <span class="st300_term term">next</span> section (if any) is correctly <a class="st300_link" href="#smfb.sections.alignment">aligned</a>. This implies that the <span class="st300_term term">data size</span> of any given section MUST be a multiple of the <a class="st300_link" href="#smfb.sections.alignment">alignment</a> size.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s3ss1c4" href="#st300_p3s3ss1c4" title="Paragraph 3.3.1.4">4</a></div><div class="st300_paragraph">Implementations MUST ignore any content inside a section of an unrecognized type <span class="st300_footnote_reference">[<a href="#st300_f_2286_0" id="st300_fr_2256" title="Jump to footnote smfb.sections.compat (reference 0)">3</a>]</span>. As sections explicitly state the size of their own data, implementations can simply seek forwards in the file by the specified data size to reach the next section.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s3ss1c5" href="#st300_p3s3ss1c5" title="Paragraph 3.3.1.5">5</a></div><div class="st300_paragraph">The first section in an <span class="st300_term type">SMF/B</span> file MUST be an <a class="st300_link" href="#smfb.sections.smf">smf</a> section. The last section in an <span class="st300_term type">SMF/B</span> file MUST be an <a class="st300_link" href="#smfb.sections.end">end</a> section.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.alignment"/><div class="st300_subsection_title_number"><a id="st300_p3s3ss2" href="#st300_p3s3ss2" title="Subsection 3.3.2: Alignment">3.3.2</a></div><div class="st300_subsection_title">Alignment</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s3ss2c1" href="#st300_p3s3ss2c1" title="Paragraph 3.3.2.1">1</a></div><div class="st300_paragraph">Sections MUST be aligned to <span class="st300_term constant">16</span> octet boundaries. As the section <a class="st300_link" href="#smfb.header">header</a> is defined to be exactly <span class="st300_term constant">16</span> octets, this implies that the data within a section will also be aligned to a <span class="st300_term constant">16</span> octet boundary <span class="st300_footnote_reference">[<a href="#st300_f_2433_0" id="st300_fr_2417" title="Jump to footnote smfb.sections.alignment.vector (reference 0)">4</a>]</span>. Implementations MUST reject <span class="st300_term type">SMF/B</span> files containing one or more incorrectly aligned sections.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.available"/><div class="st300_subsection_title_number"><a id="st300_p3s3ss3" href="#st300_p3s3ss3" title="Subsection 3.3.3: Available Sections">3.3.3</a></div><div class="st300_subsection_title">Available Sections</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s3ss3c1" href="#st300_p3s3ss3c1" title="Paragraph 3.3.3.1">1</a></div><div class="st300_paragraph">This version of the specification defines the following sections:</div></div><div class="st300_formal_item"><a id="smfb.sections.list"/><div class="st300_formal_item_title"><a id="st300_p3s3ss3c2" href="#st300_p3s3ss3c2" title="Formal item 3.3.3.2: Sections">3.3.3.2 Sections</a></div><div class="st300_formal_item_content"><ul class="st300_list_unordered"><li class="st300_list_item"><a class="st300_link" href="#smfb.sections.end">end</a></li><li class="st300_list_item"><a class="st300_link" href="#smfb.sections.metadata">metadata</a></li><li class="st300_list_item"><a class="st300_link" href="#smfb.sections.smf">smf</a></li><li class="st300_list_item"><a class="st300_link" href="#smfb.sections.triangles">triangles</a></li><li class="st300_list_item"><a class="st300_link" href="#smfb.sections.vertices-noninterleaved">vertices-noninterleaved</a></li></ul></div></div></div><div class="st300_subsection_container"><a id="smfb.sections.enumerating"/><div class="st300_subsection_title_number"><a id="st300_p3s3ss4" href="#st300_p3s3ss4" title="Subsection 3.3.4: Enumerating Sections">3.3.4</a></div><div class="st300_subsection_title">Enumerating Sections</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s3ss4c1" href="#st300_p3s3ss4c1" title="Paragraph 3.3.4.1">1</a></div><div class="st300_paragraph">Note: This subsection is <span class="st300_term term">informative</span>.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s3ss4c2" href="#st300_p3s3ss4c2" title="Paragraph 3.3.4.2">2</a></div><div class="st300_paragraph">The design of sections allows for implementations to quickly enumerate all sections within a file using the following strategy:</div></div><div class="st300_formal_item"><a id="smfb.sections.enumerating.example"/><div class="st300_formal_item_title"><a id="st300_p3s3ss4c3" href="#st300_p3s3ss4c3" title="Formal item 3.3.4.3: Enumerating Sections">3.3.4.3 Enumerating Sections</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">void showSections()
{
  // Read SMF header
  long smf = readUnsigned64();
  int major = readUnsigned32();
  int minor = readUnsigned32();

  // Read all sections
  while (bytesRemaining()) {
    long offset = currentOffset();
    long magic = readUnsigned64();
    long size = readUnsigned64();

    System.out.printf(
    "section: %s %s %s\n",
    Long.toUnsignedString(offset),
    Long.toUnsignedString(magic, 16),
    Long.toUnsignedString(size));

    seek(size);
  }
}</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s3ss4c4" href="#st300_p3s3ss4c4" title="Paragraph 3.3.4.4">4</a></div><div class="st300_paragraph">The <span class="st300_term function">bytesAvailable</span> method is assumed to return <span class="st300_term constant">true</span> if there are any bytes remaining in the file. The <span class="st300_term function">currentOffset</span> method is assumed to return the current read position in octets within the file. The <span class="st300_term function">readUnsigned64</span> method is assumed to read a 64-bit big-endian integer from the current file, advancing the current read position by 8 octets. The <span class="st300_term function">readUnsigned32</span> method is assumed to read a 32-bit big-endian integer from the current file, advancing the current read position by 4 octets.</div></div></div></div><div class="st300_section_container"><a id="smfb.sections.end"/><div class="st300_section_title_number"><a id="st300_p3s4" href="#st300_p3s4" title="Section 3.4: Section - end">3.4</a></div><div class="st300_section_title">Section - end</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s4ss1" title="Link to subsection 3.4.1: Definition">3.4.1. Definition</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s4ss2" title="Link to subsection 3.4.2: Cardinality/Ordering">3.4.2. Cardinality/Ordering</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s4ss3" title="Link to subsection 3.4.3: Magic Number">3.4.3. Magic Number</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s4ss4" title="Link to subsection 3.4.4: Data">3.4.4. Data</a></li></ul><div class="st300_subsection_container"><a id="smfb.sections.end.def"/><div class="st300_subsection_title_number"><a id="st300_p3s4ss1" href="#st300_p3s4ss1" title="Subsection 3.4.1: Definition">3.4.1</a></div><div class="st300_subsection_title">Definition</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s4ss1c1" href="#st300_p3s4ss1c1" title="Paragraph 3.4.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">end</span> section indicates the end of an <span class="st300_term type">SMF/B</span> file.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.end.cardinality"/><div class="st300_subsection_title_number"><a id="st300_p3s4ss2" href="#st300_p3s4ss2" title="Subsection 3.4.2: Cardinality/Ordering">3.4.2</a></div><div class="st300_subsection_title">Cardinality/Ordering</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s4ss2c1" href="#st300_p3s4ss2c1" title="Paragraph 3.4.2.1">1</a></div><div class="st300_paragraph">An <span class="st300_term type">end</span> section must appear exactly once in an <span class="st300_term type">SMF/B</span> file.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s4ss2c2" href="#st300_p3s4ss2c2" title="Paragraph 3.4.2.2">2</a></div><div class="st300_paragraph">The <span class="st300_term type">end</span> section MUST be the last section in an <span class="st300_term type">SMF/B</span> file. Implementations MUST reject <span class="st300_term type">SMF/B</span> files that do not contain a terminating <span class="st300_term type">end</span> section.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.end.magic"/><div class="st300_subsection_title_number"><a id="st300_p3s4ss3" href="#st300_p3s4ss3" title="Subsection 3.4.3: Magic Number">3.4.3</a></div><div class="st300_subsection_title">Magic Number</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s4ss3c1" href="#st300_p3s4ss3c1" title="Paragraph 3.4.3.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">end</span> section is identified by the magic number <span class="st300_term constant">0x534D465F454E4421</span>.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.end.data"/><div class="st300_subsection_title_number"><a id="st300_p3s4ss4" href="#st300_p3s4ss4" title="Subsection 3.4.4: Data">3.4.4</a></div><div class="st300_subsection_title">Data</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s4ss4c1" href="#st300_p3s4ss4c1" title="Paragraph 3.4.4.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">end</span> section contains no data. The specified <a class="st300_link" href="#smfb.sections.def.size">data size</a> for the section MUST be <span class="st300_term constant">0</span>.</div></div></div></div><div class="st300_section_container"><a id="smfb.sections.smf"/><div class="st300_section_title_number"><a id="st300_p3s5" href="#st300_p3s5" title="Section 3.5: Section - smf">3.5</a></div><div class="st300_section_title">Section - smf</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s5ss1" title="Link to subsection 3.5.1: Definition">3.5.1. Definition</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s5ss2" title="Link to subsection 3.5.2: Cardinality/Ordering">3.5.2. Cardinality/Ordering</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s5ss3" title="Link to subsection 3.5.3: Magic Number">3.5.3. Magic Number</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s5ss4" title="Link to subsection 3.5.4: Data">3.5.4. Data</a></li></ul><div class="st300_subsection_container"><a id="smfb.sections.smf.def"/><div class="st300_subsection_title_number"><a id="st300_p3s5ss1" href="#st300_p3s5ss1" title="Subsection 3.5.1: Definition">3.5.1</a></div><div class="st300_subsection_title">Definition</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss1c1" href="#st300_p3s5ss1c1" title="Paragraph 3.5.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">smf</span> section specifies information common to all sections in an <span class="st300_term type">SMF/B</span> file.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.smf.cardinality"/><div class="st300_subsection_title_number"><a id="st300_p3s5ss2" href="#st300_p3s5ss2" title="Subsection 3.5.2: Cardinality/Ordering">3.5.2</a></div><div class="st300_subsection_title">Cardinality/Ordering</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss2c1" href="#st300_p3s5ss2c1" title="Paragraph 3.5.2.1">1</a></div><div class="st300_paragraph">An <span class="st300_term type">smf</span> section MUST appear exactly once in an <span class="st300_term type">SMF/B</span> file.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss2c2" href="#st300_p3s5ss2c2" title="Paragraph 3.5.2.2">2</a></div><div class="st300_paragraph">The <span class="st300_term type">smf</span> section MUST be the first section in an <span class="st300_term type">SMF/B</span> file. Implementations MUST reject <span class="st300_term type">SMF/B</span> files that do not start with an <span class="st300_term type">smf</span> section.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.smf.magic"/><div class="st300_subsection_title_number"><a id="st300_p3s5ss3" href="#st300_p3s5ss3" title="Subsection 3.5.3: Magic Number">3.5.3</a></div><div class="st300_subsection_title">Magic Number</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss3c1" href="#st300_p3s5ss3c1" title="Paragraph 3.5.3.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">smf</span> section is identified by the magic number <span class="st300_term constant">0x534D465F48454144</span>.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.smf.data"/><div class="st300_subsection_title_number"><a id="st300_p3s5ss4" href="#st300_p3s5ss4" title="Subsection 3.5.4: Data">3.5.4</a></div><div class="st300_subsection_title">Data</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c1" href="#st300_p3s5ss4c1" title="Paragraph 3.5.4.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">smf</span> section begins with the following structure:</div></div><div class="st300_formal_item"><a id="smfb.sections.smf.header.def"/><div class="st300_formal_item_title"><a id="st300_p3s5ss4c2" href="#st300_p3s5ss4c2" title="Formal item 3.5.4.2: SMF Header">3.5.4.2 SMF Header</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">[record SMFBv1_0Header
  ([field schema                   SMFBv1SchemaID]
   [field vertex_count             [integer unsigned 64]]
   [field triangle_count           [integer unsigned 64]]
   [field triangle_index_size_bits [integer unsigned 32]]
   [field attribute_count          [integer unsigned 32]]
   [field attribute_offset         [integer unsigned 32]]
   [field coordinate_system        SMFBv1CoordinateSystems]
   [padding-octets                 2])]
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c3" href="#st300_p3s5ss4c3" title="Paragraph 3.5.4.3">3</a></div><div class="st300_paragraph">The <span class="st300_term field">schema</span> field specifies the <a class="st300_link" href="#smf_model.schema_id">schema identifier</a> for the model:</div></div><div class="st300_formal_item"><a id="smfb.sections.smf.header.schema_id.def"/><div class="st300_formal_item_title"><a id="st300_p3s5ss4c4" href="#st300_p3s5ss4c4" title="Formal item 3.5.4.4: Schema Identifier">3.5.4.4 Schema Identifier</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">[record SMFBv1SchemaID
  ([field schema_id            [string 64 "UTF-8"]]
   [field schema_version_major [integer unsigned 32]]
   [field schema_version_minor [integer unsigned 32]]
   [padding-octets             4])]
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c5" href="#st300_p3s5ss4c5" title="Paragraph 3.5.4.5">5</a></div><div class="st300_paragraph">If the length of the <span class="st300_term field">schema_id</span> field is <span class="st300_term constant">0</span>, the schema identifier as a whole is ignored.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c6" href="#st300_p3s5ss4c6" title="Paragraph 3.5.4.6">6</a></div><div class="st300_paragraph">The <span class="st300_term field">vertex_count</span> field specifies the number of vertices that will be specified in a <a class="st300_link" href="#smfb.sections.vertices-noninterleaved">vertices-noninterleaved</a> section.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c7" href="#st300_p3s5ss4c7" title="Paragraph 3.5.4.7">7</a></div><div class="st300_paragraph">The <span class="st300_term field">triangle_count</span> field specifies the number of triangles that will be specified in a <a class="st300_link" href="#smfb.sections.triangles">triangles</a> section. The <span class="st300_term field">triangle_size</span> field specifies the size in bits of the individual vertex indices within each triangle.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c8" href="#st300_p3s5ss4c8" title="Paragraph 3.5.4.8">8</a></div><div class="st300_paragraph">The <span class="st300_term field">attribute_count</span> field specifies the number of <a class="st300_link" href="#smf_model.attribute">attributes</a> that will be declared. The <span class="st300_term field">attribute_offset</span> field specifies a relative offset in octets, from the start of the <span class="st300_term field">attribute_offset</span> field, at which a list of attributes will be declared. The purpose of this field is to allow for forward compatibility: Future updates to this specification may add extra fields to the end of the header structure, and the value of this field allows older implementations to skip those newer fields.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c9" href="#st300_p3s5ss4c9" title="Paragraph 3.5.4.9">9</a></div><div class="st300_paragraph">The <span class="st300_term field">coordinate_system</span> field specifies the <a class="st300_link" href="#smf_model.coords">coordinate system</a> of the model:</div></div><div class="st300_formal_item"><a id="smfb.sections.smf.header.coords.def"/><div class="st300_formal_item_title"><a id="st300_p3s5ss4c10" href="#st300_p3s5ss4c10" title="Formal item 3.5.4.10: Coordinate System">3.5.4.10 Coordinate System</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">[packed SMFBv1CoordinateSystems
  ([field right   [integer unsigned 3]]
   [field up      [integer unsigned 3]]
   [field forward [integer unsigned 3]]
   [field winding [integer unsigned 2]]
   [padding-bits  5])]
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c11" href="#st300_p3s5ss4c11" title="Paragraph 3.5.4.11">11</a></div><div class="st300_paragraph">The <span class="st300_term term">axis</span> and <span class="st300_term term">winding order</span> values are related to integer values via the following functions:</div></div><div class="st300_formal_item"><a id="smfb.sections.smf.header.coords.map"/><div class="st300_formal_item_title"><a id="st300_p3s5ss4c12" href="#st300_p3s5ss4c12" title="Formal item 3.5.4.12: Coordinate System Mapping">3.5.4.12 Coordinate System Mapping</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">import qualified Axis as A

axisOrdinal :: A.Axis -&gt; Integer
axisOrdinal A.PositiveX = 0
axisOrdinal A.PositiveY = 1
axisOrdinal A.PositiveZ = 2
axisOrdinal A.NegativeX = 3
axisOrdinal A.NegativeY = 4
axisOrdinal A.NegativeZ = 5

windingOrdinal :: A.WindingOrder -&gt; Integer
windingOrdinal A.WindingOrderClockwise        = 0
windingOrdinal A.WindingOrderCounterClockwise = 1
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c13" href="#st300_p3s5ss4c13" title="Paragraph 3.5.4.13">13</a></div><div class="st300_paragraph">Directly following the end of the header structure, is a series of attribute declarations:</div></div><div class="st300_formal_item"><a id="smfb.sections.smf.header.attribute.def"/><div class="st300_formal_item_title"><a id="st300_p3s5ss4c14" href="#st300_p3s5ss4c14" title="Formal item 3.5.4.14: Attribute">3.5.4.14 Attribute</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">[record SMFBv1Attribute
  ([field name            [string 64 "UTF-8"]]
   [field component_kind  [integer unsigned 32]]
   [field component_count [integer unsigned 32]]
   [field component_size  [integer unsigned 32]])]
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c15" href="#st300_p3s5ss4c15" title="Paragraph 3.5.4.15">15</a></div><div class="st300_paragraph">The <span class="st300_term field">name</span> field specifies the name of the attribute. The <span class="st300_term field">component_kind</span> field specifies the type of the attribute components. The <span class="st300_term field">component_count</span> field specifies the number of components in each value in the attribute, and the <span class="st300_term field">component_size</span> field specifies the size in bits of each component value.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s5ss4c16" href="#st300_p3s5ss4c16" title="Paragraph 3.5.4.16">16</a></div><div class="st300_paragraph">Attribute component types are related to integer values via the following function:</div></div><div class="st300_formal_item"><a id="smfb.sections.smf.header.attribute.type_map"/><div class="st300_formal_item_title"><a id="st300_p3s5ss4c17" href="#st300_p3s5ss4c17" title="Formal item 3.5.4.17: Attribute Type Mapping">3.5.4.17 Attribute Type Mapping</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">import qualified Attribute as A

attributeTypeOrdinal :: A.ComponentType -&gt; Integer
attributeTypeOrdinal A.IntegerSigned   = 0
attributeTypeOrdinal A.IntegerUnsigned = 1
attributeTypeOrdinal A.FloatingPoint   = 2</pre></div></div></div></div><div class="st300_section_container"><a id="smfb.sections.triangles"/><div class="st300_section_title_number"><a id="st300_p3s6" href="#st300_p3s6" title="Section 3.6: Section - triangles">3.6</a></div><div class="st300_section_title">Section - triangles</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s6ss1" title="Link to subsection 3.6.1: Definition">3.6.1. Definition</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s6ss2" title="Link to subsection 3.6.2: Cardinality/Ordering">3.6.2. Cardinality/Ordering</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s6ss3" title="Link to subsection 3.6.3: Magic Number">3.6.3. Magic Number</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s6ss4" title="Link to subsection 3.6.4: Data">3.6.4. Data</a></li></ul><div class="st300_subsection_container"><a id="smfb.sections.triangles.def"/><div class="st300_subsection_title_number"><a id="st300_p3s6ss1" href="#st300_p3s6ss1" title="Subsection 3.6.1: Definition">3.6.1</a></div><div class="st300_subsection_title">Definition</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s6ss1c1" href="#st300_p3s6ss1c1" title="Paragraph 3.6.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">triangles</span> section specifies triangle data.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.triangles.cardinality"/><div class="st300_subsection_title_number"><a id="st300_p3s6ss2" href="#st300_p3s6ss2" title="Subsection 3.6.2: Cardinality/Ordering">3.6.2</a></div><div class="st300_subsection_title">Cardinality/Ordering</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s6ss2c1" href="#st300_p3s6ss2c1" title="Paragraph 3.6.2.1">1</a></div><div class="st300_paragraph">An <span class="st300_term type">triangles</span> section can appear <span class="st300_term expression">[0, 1]</span> times in an <span class="st300_term type">SMF/B</span> file.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s6ss2c2" href="#st300_p3s6ss2c2" title="Paragraph 3.6.2.2">2</a></div><div class="st300_paragraph">The <span class="st300_term type">triangles</span> section has no requirements on ordering.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.triangles.magic"/><div class="st300_subsection_title_number"><a id="st300_p3s6ss3" href="#st300_p3s6ss3" title="Subsection 3.6.3: Magic Number">3.6.3</a></div><div class="st300_subsection_title">Magic Number</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s6ss3c1" href="#st300_p3s6ss3c1" title="Paragraph 3.6.3.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">triangles</span> section is identified by the magic number <span class="st300_term constant">0x534D465F54524953</span>.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.triangles.data"/><div class="st300_subsection_title_number"><a id="st300_p3s6ss4" href="#st300_p3s6ss4" title="Subsection 3.6.4: Data">3.6.4</a></div><div class="st300_subsection_title">Data</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s6ss4c1" href="#st300_p3s6ss4c1" title="Paragraph 3.6.4.1">1</a></div><div class="st300_paragraph">Triangles are specified as an array of 3-element unsigned integer vectors, with each integer component being of the size declared in the preceding <a class="st300_link" href="#smfb.sections.smf.data">smf</a> section. No padding is inserted between triangles, but padding may need to be added at the end of the array in order to ensure proper section <a class="st300_link" href="#smfb.sections.alignment">alignment</a>.</div></div></div></div><div class="st300_section_container"><a id="smfb.sections.vertices-noninterleaved"/><div class="st300_section_title_number"><a id="st300_p3s7" href="#st300_p3s7" title="Section 3.7: Section - vertices-noninterleaved">3.7</a></div><div class="st300_section_title">Section - vertices-noninterleaved</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s7ss1" title="Link to subsection 3.7.1: Definition">3.7.1. Definition</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s7ss2" title="Link to subsection 3.7.2: Cardinality/Ordering">3.7.2. Cardinality/Ordering</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s7ss3" title="Link to subsection 3.7.3: Magic Number">3.7.3. Magic Number</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s7ss4" title="Link to subsection 3.7.4: Data">3.7.4. Data</a></li></ul><div class="st300_subsection_container"><a id="smfb.sections.vertices-noninterleaved.def"/><div class="st300_subsection_title_number"><a id="st300_p3s7ss1" href="#st300_p3s7ss1" title="Subsection 3.7.1: Definition">3.7.1</a></div><div class="st300_subsection_title">Definition</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s7ss1c1" href="#st300_p3s7ss1c1" title="Paragraph 3.7.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">vertices-noninterleaved</span> section specifies vertex data for all declared <a class="st300_link" href="#smf_model.attribute">attributes</a>.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.vertices-noninterleaved.cardinality"/><div class="st300_subsection_title_number"><a id="st300_p3s7ss2" href="#st300_p3s7ss2" title="Subsection 3.7.2: Cardinality/Ordering">3.7.2</a></div><div class="st300_subsection_title">Cardinality/Ordering</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s7ss2c1" href="#st300_p3s7ss2c1" title="Paragraph 3.7.2.1">1</a></div><div class="st300_paragraph">A <span class="st300_term type">vertices-noninterleaved</span> section can appear <span class="st300_term expression">[0, 1]</span> times in an <span class="st300_term type">SMF/B</span> file.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s7ss2c2" href="#st300_p3s7ss2c2" title="Paragraph 3.7.2.2">2</a></div><div class="st300_paragraph">The <span class="st300_term type">vertices-noninterleaved</span> section has no requirements on ordering.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.vertices-noninterleaved.magic"/><div class="st300_subsection_title_number"><a id="st300_p3s7ss3" href="#st300_p3s7ss3" title="Subsection 3.7.3: Magic Number">3.7.3</a></div><div class="st300_subsection_title">Magic Number</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s7ss3c1" href="#st300_p3s7ss3c1" title="Paragraph 3.7.3.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">vertices-noninterleaved</span> section is identified by the magic number <span class="st300_term constant">0x534D465F56444E49</span>.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.vertices-noninterleaved.data"/><div class="st300_subsection_title_number"><a id="st300_p3s7ss4" href="#st300_p3s7ss4" title="Subsection 3.7.4: Data">3.7.4</a></div><div class="st300_subsection_title">Data</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s7ss4c1" href="#st300_p3s7ss4c1" title="Paragraph 3.7.4.1">1</a></div><div class="st300_paragraph">The data for each attribute is given in full in the order in which the attributes were declared in the header. Specifically, in a file containing <span class="st300_term expression">v</span> vertices and a list of attributes <span class="st300_term expression">a</span> of length <span class="st300_term expression">n</span>, the data of the section will contain <span class="st300_term expression">v</span> values of the type specified in <span class="st300_term expression">a !! 0</span>, followed by <span class="st300_term expression">v</span> values of the type specified by <span class="st300_term expression">a !! 1</span>, and so on up to <span class="st300_term expression">a !! (n - 1)</span>. All values are stored in big-endian form.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s7ss4c2" href="#st300_p3s7ss4c2" title="Paragraph 3.7.4.2">2</a></div><div class="st300_paragraph">The start of the data for each attribute is aligned to the next <span class="st300_term constant">16</span> octet boundary regardless of type. The alignment is achieved by inserting <span class="st300_term term">padding octets</span> at the end of the data for each attribute so that the start of the data for the next attribute, or the start of the next section, occurs on a <span class="st300_term constant">16</span> octet boundary.</div></div></div></div><div class="st300_section_container"><a id="smfb.sections.metadata"/><div class="st300_section_title_number"><a id="st300_p3s8" href="#st300_p3s8" title="Section 3.8: Section - metadata">3.8</a></div><div class="st300_section_title">Section - metadata</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s8ss1" title="Link to subsection 3.8.1: Definition">3.8.1. Definition</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s8ss2" title="Link to subsection 3.8.2: Cardinality/Ordering">3.8.2. Cardinality/Ordering</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s8ss3" title="Link to subsection 3.8.3: Magic Number">3.8.3. Magic Number</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p3s8ss4" title="Link to subsection 3.8.4: Data">3.8.4. Data</a></li></ul><div class="st300_subsection_container"><a id="smfb.sections.metadata.def"/><div class="st300_subsection_title_number"><a id="st300_p3s8ss1" href="#st300_p3s8ss1" title="Subsection 3.8.1: Definition">3.8.1</a></div><div class="st300_subsection_title">Definition</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s8ss1c1" href="#st300_p3s8ss1c1" title="Paragraph 3.8.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">metadata</span> section specifies arbitrary metadata.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.metadata.cardinality"/><div class="st300_subsection_title_number"><a id="st300_p3s8ss2" href="#st300_p3s8ss2" title="Subsection 3.8.2: Cardinality/Ordering">3.8.2</a></div><div class="st300_subsection_title">Cardinality/Ordering</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s8ss2c1" href="#st300_p3s8ss2c1" title="Paragraph 3.8.2.1">1</a></div><div class="st300_paragraph">A <span class="st300_term type">metadata</span> section can appear <span class="st300_term expression">[0, n]</span> times in an <span class="st300_term type">SMF/B</span> file, for any <span class="st300_term expression">n</span>.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s8ss2c2" href="#st300_p3s8ss2c2" title="Paragraph 3.8.2.2">2</a></div><div class="st300_paragraph">The <span class="st300_term type">metadata</span> section has no requirements on ordering.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.metadata.magic"/><div class="st300_subsection_title_number"><a id="st300_p3s8ss3" href="#st300_p3s8ss3" title="Subsection 3.8.3: Magic Number">3.8.3</a></div><div class="st300_subsection_title">Magic Number</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s8ss3c1" href="#st300_p3s8ss3c1" title="Paragraph 3.8.3.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">metadata</span> section is identified by the magic number <span class="st300_term constant">0x534D465F4D455441</span>.</div></div></div><div class="st300_subsection_container"><a id="smfb.sections.metadata.data"/><div class="st300_subsection_title_number"><a id="st300_p3s8ss4" href="#st300_p3s8ss4" title="Subsection 3.8.4: Data">3.8.4</a></div><div class="st300_subsection_title">Data</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s8ss4c1" href="#st300_p3s8ss4c1" title="Paragraph 3.8.4.1">1</a></div><div class="st300_paragraph">The data of a <span class="st300_term type">metadata</span> section starts with the following fixed-size header:</div></div><div class="st300_formal_item"><a id="smfb.sections.metadata.header.def"/><div class="st300_formal_item_title"><a id="st300_p3s8ss4c2" href="#st300_p3s8ss4c2" title="Formal item 3.8.4.2: Metadata Header">3.8.4.2 Metadata Header</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">[record SMFBv1MetadataID
  ([field meta_schema_id            [string 64 "UTF-8"]]
   [field meta_schema_version_major [integer unsigned 32]]
   [field meta_schema_version_minor [integer unsigned 32]]
   [field meta_size                 [integer unsigned 32]])]
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s8ss4c3" href="#st300_p3s8ss4c3" title="Paragraph 3.8.4.3">3</a></div><div class="st300_paragraph">The <span class="st300_term field">meta_schema_id</span>, <span class="st300_term field">meta_schema_version_major</span>, and <span class="st300_term field">meta_schema_version_minor</span> fields are intended to provide type information for the metadata. They have the same semantics and purpose as <a class="st300_link" href="#smf_model.schema_id">schema identifiers</a>. The <span class="st300_term field">meta_size</span> field specifies the size in octets of the metadata.</div></div></div></div><div class="st300_section_container"><a id="smfb.example"/><div class="st300_section_title_number"><a id="st300_p3s9" href="#st300_p3s9" title="Section 3.9: Example">3.9</a></div><div class="st300_section_title">Example</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p3s9ss4c1" href="#st300_p3s9ss4c1" title="Paragraph 3.9.4.1">1</a></div><div class="st300_paragraph">A diagram of an example <span class="st300_term type">SMF/B</span> file is as follows:</div></div><div class="st300_formal_item"><a id="smfb.example.diagram"/><div class="st300_formal_item_title"><a id="st300_p3s9ss4c2" href="#st300_p3s9ss4c2" title="Formal item 3.9.4.2: Example">3.9.4.2 Example</a></div><div class="st300_formal_item_content"><img class="st300_image" alt="Example file" src="layout.svg.png"/></div></div></div></div><div class="st300_part_container"><a id="smft"/><div class="st300_part_title_number"><a id="st300_p4" href="#st300_p4" title="Part 4: SMF/T - Text Encoding">4</a></div><div class="st300_part_title">SMF/T - Text Encoding</div><ul class="st300_contents st300_part_contents_outer st300_part_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p4s1" title="Link to section 4.1: Overview">4.1. Overview</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p4s2" title="Link to section 4.2: Sections">4.2. Sections</a><ul class="st300_contents st300_section_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s2ss1" title="Link to subsection 4.2.1: Definition">4.2.1. Definition</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s2ss2" title="Link to subsection 4.2.2: Available Sections">4.2.2. Available Sections</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p4s3" title="Link to section 4.3: Section - smf">4.3. Section - smf</a><ul class="st300_contents st300_section_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s3ss1" title="Link to subsection 4.3.1: Definition">4.3.1. Definition</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s3ss2" title="Link to subsection 4.3.2: Subcommands">4.3.2. Subcommands</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s3ss3" title="Link to subsection 4.3.3: Subcommand - attribute">4.3.3. Subcommand - attribute</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s3ss4" title="Link to subsection 4.3.4: Subcommand - coordinates">4.3.4. Subcommand - coordinates</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s3ss5" title="Link to subsection 4.3.5: Subcommand - schema">4.3.5. Subcommand - schema</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s3ss6" title="Link to subsection 4.3.6: Subcommand - triangles">4.3.6. Subcommand - triangles</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s3ss7" title="Link to subsection 4.3.7: Subcommand - vertices">4.3.7. Subcommand - vertices</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p4s4" title="Link to section 4.4: Section - triangles">4.4. Section - triangles</a><ul class="st300_contents st300_section_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s4ss1" title="Link to subsection 4.4.1: Definition">4.4.1. Definition</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p4s5" title="Link to section 4.5: Section - vertices-noninterleaved">4.5. Section - vertices-noninterleaved</a><ul class="st300_contents st300_section_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s5ss1" title="Link to subsection 4.5.1: Definition">4.5.1. Definition</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s5ss2" title="Link to subsection 4.5.2: Subcommands">4.5.2. Subcommands</a></li><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s5ss3" title="Link to subsection 4.5.3: Subcommand - attribute">4.5.3. Subcommand - attribute</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p4s6" title="Link to section 4.6: Section - metadata">4.6. Section - metadata</a><ul class="st300_contents st300_section_contents"><li class="st300_contents_item st300_contents_item2 st300_contents_item_subsection"><a href="#st300_p4s6ss1" title="Link to subsection 4.6.1: Definition">4.6.1. Definition</a></li></ul></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p4s7" title="Link to section 4.7: Example">4.7. Example</a></li></ul><div class="st300_section_container"><a id="smft.overview"/><div class="st300_section_title_number"><a id="st300_p4s1" href="#st300_p4s1" title="Section 4.1: Overview">4.1</a></div><div class="st300_section_title">Overview</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s1c1" href="#st300_p4s1c1" title="Paragraph 4.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term type">SMF/T</span> format is a text encoding for the <a class="st300_link" href="#smf_model.model">SMF model</a>. Data specified in the text encoding is separated into explicitly delimited <a class="st300_link" href="#smft.sections">sections</a>.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s1c2" href="#st300_p4s1c2" title="Paragraph 4.1.2">2</a></div><div class="st300_paragraph">The format is line-based, and lines (excluding the very first line in the file) containing only whitespace, or lines beginning with <span class="st300_term constant">U+0023</span> <span class="st300_term constant">#</span> are ignored. In a given line, whitespace between tokens is insignificant.</div></div></div><div class="st300_section_container"><a id="smft.sections"/><div class="st300_section_title_number"><a id="st300_p4s2" href="#st300_p4s2" title="Section 4.2: Sections">4.2</a></div><div class="st300_section_title">Sections</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s2ss1" title="Link to subsection 4.2.1: Definition">4.2.1. Definition</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s2ss2" title="Link to subsection 4.2.2: Available Sections">4.2.2. Available Sections</a></li></ul><div class="st300_subsection_container"><a id="smft.sections.def"/><div class="st300_subsection_title_number"><a id="st300_p4s2ss1" href="#st300_p4s2ss1" title="Subsection 4.2.1: Definition">4.2.1</a></div><div class="st300_subsection_title">Definition</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s2ss1c1" href="#st300_p4s2ss1c1" title="Paragraph 4.2.1.1">1</a></div><div class="st300_paragraph">A <span class="st300_term term">section</span> is started with a <a class="st300_link" href="#smft.sections">section command</a> and terminated with a corresponding <a class="st300_link" href="#smft.sections.end">end</a> command. Implementations MUST ignore any content between and including an unrecognized section command and the corresponding end command <span class="st300_footnote_reference">[<a href="#st300_f_3981_0" id="st300_fr_3913" title="Jump to footnote smft.sections.compat (reference 0)">5</a>]</span>.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s2ss1c2" href="#st300_p4s2ss1c2" title="Paragraph 4.2.1.2">2</a></div><div class="st300_paragraph">The first line of an <span class="st300_term type">SMF/T</span> file MUST begin an <a class="st300_link" href="#smft.sections.smf">smf</a> section.</div></div><div class="st300_paragraph_container"><a id="smft.sections.end"/><div class="st300_paragraph_number"><a id="st300_p4s2ss1c3" href="#st300_p4s2ss1c3" title="Paragraph 4.2.1.3">3</a></div><div class="st300_paragraph">A <span class="st300_term term">section</span> is terminated with an <span class="st300_term command">end</span> command. Implementations MUST raise errors if an end-of-file condition is encountered before an <span class="st300_term command">end</span> command is given for the current section.</div></div><div class="st300_formal_item"><a id="smft.sections.def.end.syntax"/><div class="st300_formal_item_title"><a id="st300_p4s2ss1c4" href="#st300_p4s2ss1c4" title="Formal item 4.2.1.4: end">4.2.1.4 end</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">end =
  "end" ;</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s2ss1c5" href="#st300_p4s2ss1c5" title="Paragraph 4.2.1.5">5</a></div><div class="st300_paragraph">The command takes no arguments.</div></div></div><div class="st300_subsection_container"><a id="smft.sections.available"/><div class="st300_subsection_title_number"><a id="st300_p4s2ss2" href="#st300_p4s2ss2" title="Subsection 4.2.2: Available Sections">4.2.2</a></div><div class="st300_subsection_title">Available Sections</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s2ss2c1" href="#st300_p4s2ss2c1" title="Paragraph 4.2.2.1">1</a></div><div class="st300_paragraph">This version of the specification defines the following <span class="st300_term term">sections</span>:</div></div><div class="st300_formal_item"><a id="smft.sections.list"/><div class="st300_formal_item_title"><a id="st300_p4s2ss2c2" href="#st300_p4s2ss2c2" title="Formal item 4.2.2.2: Sections">4.2.2.2 Sections</a></div><div class="st300_formal_item_content"><ul class="st300_list_unordered"><li class="st300_list_item"><a class="st300_link" href="#smft.sections.smf">smf</a></li><li class="st300_list_item"><a class="st300_link" href="#smft.sections.triangles">triangles</a></li><li class="st300_list_item"><a class="st300_link" href="#smft.sections.vertices-noninterleaved">vertices-noninterleaved</a></li><li class="st300_list_item"><a class="st300_link" href="#smft.sections.metadata">metadata</a></li></ul></div></div></div></div><div class="st300_section_container"><a id="smft.sections.smf"/><div class="st300_section_title_number"><a id="st300_p4s3" href="#st300_p4s3" title="Section 4.3: Section - smf">4.3</a></div><div class="st300_section_title">Section - smf</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s3ss1" title="Link to subsection 4.3.1: Definition">4.3.1. Definition</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s3ss2" title="Link to subsection 4.3.2: Subcommands">4.3.2. Subcommands</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s3ss3" title="Link to subsection 4.3.3: Subcommand - attribute">4.3.3. Subcommand - attribute</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s3ss4" title="Link to subsection 4.3.4: Subcommand - coordinates">4.3.4. Subcommand - coordinates</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s3ss5" title="Link to subsection 4.3.5: Subcommand - schema">4.3.5. Subcommand - schema</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s3ss6" title="Link to subsection 4.3.6: Subcommand - triangles">4.3.6. Subcommand - triangles</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s3ss7" title="Link to subsection 4.3.7: Subcommand - vertices">4.3.7. Subcommand - vertices</a></li></ul><div class="st300_subsection_container"><a id="smft.sections.smf.def"/><div class="st300_subsection_title_number"><a id="st300_p4s3ss1" href="#st300_p4s3ss1" title="Subsection 4.3.1: Definition">4.3.1</a></div><div class="st300_subsection_title">Definition</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss1c1" href="#st300_p4s3ss1c1" title="Paragraph 4.3.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">smf</span> section specifies the <span class="st300_term term">major</span> and <span class="st300_term term">minor</span> version of the specification to which the rest of the file is expected to conform. The first argument specifies the <span class="st300_term term">major</span> version, and the second argument specifies the <span class="st300_term term">minor</span> version. Implementations MUST immediately reject files that are of unsupported <span class="st300_term term">major</span> versions, and MUST halt processing of the rest of the file if the version numbers cannot be parsed.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss1c2" href="#st300_p4s3ss1c2" title="Paragraph 4.3.1.2">2</a></div><div class="st300_paragraph">The command takes the following arguments:</div></div><div class="st300_formal_item"><a id="smft.sections.smf.args"/><div class="st300_formal_item_title"><a id="st300_p4s3ss1c3" href="#st300_p4s3ss1c3" title="Formal item 4.3.1.3: smf Arguments">4.3.1.3 smf Arguments</a></div><div class="st300_formal_item_content"><ol class="st300_list_ordered"><li class="st300_list_item">The non-negative SMF major version</li><li class="st300_list_item">The non-negative SMF minor version</li></ol></div></div><div class="st300_formal_item"><a id="smft.sections.smf.syntax"/><div class="st300_formal_item_title"><a id="st300_p4s3ss1c4" href="#st300_p4s3ss1c4" title="Formal item 4.3.1.4: smf">4.3.1.4 smf</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">smf =
  "smf" , integer-unsigned , integer-unsigned ;</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss1c5" href="#st300_p4s3ss1c5" title="Paragraph 4.3.1.5">5</a></div><div class="st300_paragraph">The contents of an <span class="st300_term command">smf</span> section are a series of <a class="st300_link" href="#smft.sections.smf.subs">subcommands</a> with at most one subcommand appearing on each line within the section. A <span class="st300_term term">subcommand</span> consists of the subcommand's name and a series of zero or more arguments. Implementations MUST ignore subcommands that have unrecognized names, but SHOULD log warning messages to indicate that unrecognized subcommands have been specified.</div></div></div><div class="st300_subsection_container"><a id="smft.sections.smf.subs"/><div class="st300_subsection_title_number"><a id="st300_p4s3ss2" href="#st300_p4s3ss2" title="Subsection 4.3.2: Subcommands">4.3.2</a></div><div class="st300_subsection_title">Subcommands</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss2c1" href="#st300_p4s3ss2c1" title="Paragraph 4.3.2.1">1</a></div><div class="st300_paragraph">This version of the specification defines the following <span class="st300_term command">smf</span> <span class="st300_term term">subcommands</span>:</div></div><div class="st300_formal_item"><a id="smft.sections.smf.subs.list"/><div class="st300_formal_item_title"><a id="st300_p4s3ss2c2" href="#st300_p4s3ss2c2" title="Formal item 4.3.2.2: Subcommands">4.3.2.2 Subcommands</a></div><div class="st300_formal_item_content"><ul class="st300_list_unordered"><li class="st300_list_item"><a class="st300_link" href="#smft.sections.smf.subs.attribute">attribute</a></li><li class="st300_list_item"><a class="st300_link" href="#smft.sections.smf.subs.coordinates">coordinates</a></li><li class="st300_list_item"><a class="st300_link" href="#smft.sections.smf.subs.schema">schema</a></li><li class="st300_list_item"><a class="st300_link" href="#smft.sections.smf.subs.triangles">triangles</a></li><li class="st300_list_item"><a class="st300_link" href="#smft.sections.smf.subs.vertices">vertices</a></li></ul></div></div></div><div class="st300_subsection_container"><a id="smft.sections.smf.subs.attribute"/><div class="st300_subsection_title_number"><a id="st300_p4s3ss3" href="#st300_p4s3ss3" title="Subsection 4.3.3: Subcommand - attribute">4.3.3</a></div><div class="st300_subsection_title">Subcommand - attribute</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss3c1" href="#st300_p4s3ss3c1" title="Paragraph 4.3.3.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">attribute</span> subcommand specifies an <a class="st300_link" href="#smf_model.attribute">attribute</a> that will appear in the model.</div></div><div class="st300_formal_item"><a id="smft.sections.smf.subs.attribute.def"/><div class="st300_formal_item_title"><a id="st300_p4s3ss3c2" href="#st300_p4s3ss3c2" title="Formal item 4.3.3.2: attribute">4.3.3.2 attribute</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">attribute_name_raw =
  ? [\p{IsAlphabetic}\p{IsDigit}_\-\.:]{1,64} ? ;

attribute_name_quoted =
  """ , attribute_name_raw , """ ;

attribute_name =
  attribute_name_raw | attribute_name_quoted ;

attribute_type =
  "integer-signed" | "integer-unsigned" | "float" ;

smf_attribute =
  "attribute" , attribute_name , attribute_type , integer-unsigned , integer-unsigned ;
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss3c3" href="#st300_p4s3ss3c3" title="Paragraph 4.3.3.3">3</a></div><div class="st300_paragraph">The subcommand takes the following arguments:</div></div><div class="st300_formal_item"><a id="smft.sections.smf.subs.attribute.args"/><div class="st300_formal_item_title"><a id="st300_p4s3ss3c4" href="#st300_p4s3ss3c4" title="Formal item 4.3.3.4: attributes Arguments">4.3.3.4 attributes Arguments</a></div><div class="st300_formal_item_content"><ol class="st300_list_ordered"><li class="st300_list_item">The name of the attribute</li><li class="st300_list_item">The type of the components in the attribute</li><li class="st300_list_item">The non-negative number of components in the attribute</li><li class="st300_list_item">The non-negative size in bits of an individual component</li></ol></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss3c5" href="#st300_p4s3ss3c5" title="Paragraph 4.3.3.5">5</a></div><div class="st300_paragraph">The subcommand is allowed to appear any number of times, but all specified attribute names must be unique.</div></div></div><div class="st300_subsection_container"><a id="smft.sections.smf.subs.coordinates"/><div class="st300_subsection_title_number"><a id="st300_p4s3ss4" href="#st300_p4s3ss4" title="Subsection 4.3.4: Subcommand - coordinates">4.3.4</a></div><div class="st300_subsection_title">Subcommand - coordinates</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss4c1" href="#st300_p4s3ss4c1" title="Paragraph 4.3.4.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">coordinates</span> subcommand specifies the <a class="st300_link" href="#smf_model.coords">coordinate space</a> of the mesh data that will appear in the model.</div></div><div class="st300_formal_item"><a id="smft.sections.smf.subs.coordinates.def"/><div class="st300_formal_item_title"><a id="st300_p4s3ss4c2" href="#st300_p4s3ss4c2" title="Formal item 4.3.4.2: coordinates">4.3.4.2 coordinates</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">axis =
  "+x" | "-x" | "+y" | "-y" | "+z" | "-z" ;

winding_order =
  "clockwise" | "counter-clockwise" ;

smf_coordinates =
  "coordinates" , &lt;axis&gt; , &lt;axis&gt; , &lt;axis&gt; , &lt;winding_order&gt; ;
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss4c3" href="#st300_p4s3ss4c3" title="Paragraph 4.3.4.3">3</a></div><div class="st300_paragraph">The subcommand takes the following arguments:</div></div><div class="st300_formal_item"><a id="smft.sections.smf.subs.coordinates.args"/><div class="st300_formal_item_title"><a id="st300_p4s3ss4c4" href="#st300_p4s3ss4c4" title="Formal item 4.3.4.4: coordinates Arguments">4.3.4.4 coordinates Arguments</a></div><div class="st300_formal_item_content"><ol class="st300_list_ordered"><li class="st300_list_item">The axis for the <span class="st300_term term">right</span> direction</li><li class="st300_list_item">The axis for the <span class="st300_term term">up</span> direction</li><li class="st300_list_item">The axis for the <span class="st300_term term">forward</span> direction</li><li class="st300_list_item">The triangle <span class="st300_term term">winding order</span></li></ol></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss4c5" href="#st300_p4s3ss4c5" title="Paragraph 4.3.4.5">5</a></div><div class="st300_paragraph">If the subcommand does not appear in the section, implementations MUST behave as if the following subcommand had been specified:</div></div><div class="st300_formal_item"><a id="smft.sections.smf.subs.coordinates.default"/><div class="st300_formal_item_title"><a id="st300_p4s3ss4c6" href="#st300_p4s3ss4c6" title="Formal item 4.3.4.6: coordinates Default">4.3.4.6 coordinates Default</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">coordinates +x +y -z counter-clockwise</pre></div></div></div><div class="st300_subsection_container"><a id="smft.sections.smf.subs.schema"/><div class="st300_subsection_title_number"><a id="st300_p4s3ss5" href="#st300_p4s3ss5" title="Subsection 4.3.5: Subcommand - schema">4.3.5</a></div><div class="st300_subsection_title">Subcommand - schema</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss5c1" href="#st300_p4s3ss5c1" title="Paragraph 4.3.5.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">schema</span> command specifies the <a class="st300_link" href="#smf_model.schema_id">schema identifier</a> for the file.</div></div><div class="st300_formal_item"><a id="smft.header.schema.def"/><div class="st300_formal_item_title"><a id="st300_p4s3ss5c2" href="#st300_p4s3ss5c2" title="Formal item 4.3.5.2: schema">4.3.5.2 schema</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">smf_schema =
  "schema" , schema_name , integer-unsigned , integer-unsigned ;</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss5c3" href="#st300_p4s3ss5c3" title="Paragraph 4.3.5.3">3</a></div><div class="st300_paragraph">The command takes the following arguments:</div></div><div class="st300_formal_item"><a id="smft.sections.smf.subs.schema.args"/><div class="st300_formal_item_title"><a id="st300_p4s3ss5c4" href="#st300_p4s3ss5c4" title="Formal item 4.3.5.4: schema Arguments">4.3.5.4 schema Arguments</a></div><div class="st300_formal_item_content"><ol class="st300_list_ordered"><li class="st300_list_item">The schema ID string</li><li class="st300_list_item">The non-negative schema major version</li><li class="st300_list_item">The non-negative schema minor version</li></ol></div></div></div><div class="st300_subsection_container"><a id="smft.sections.smf.subs.triangles"/><div class="st300_subsection_title_number"><a id="st300_p4s3ss6" href="#st300_p4s3ss6" title="Subsection 4.3.6: Subcommand - triangles">4.3.6</a></div><div class="st300_subsection_title">Subcommand - triangles</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss6c1" href="#st300_p4s3ss6c1" title="Paragraph 4.3.6.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">triangles</span> subcommand specifies the number of <a class="st300_link" href="#smf_model.triangle">triangles</a> that will appear in the model, and the size of the vertex indices in bits.</div></div><div class="st300_formal_item"><a id="smft.sections.smf.subs.triangles.def"/><div class="st300_formal_item_title"><a id="st300_p4s3ss6c2" href="#st300_p4s3ss6c2" title="Formal item 4.3.6.2: triangles">4.3.6.2 triangles</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">smf_triangles =
  "triangles" , integer-unsigned , integer-unsigned ;</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss6c3" href="#st300_p4s3ss6c3" title="Paragraph 4.3.6.3">3</a></div><div class="st300_paragraph">The subcommand takes the following arguments:</div></div><div class="st300_formal_item"><a id="smft.sections.smf.subs.triangles.args"/><div class="st300_formal_item_title"><a id="st300_p4s3ss6c4" href="#st300_p4s3ss6c4" title="Formal item 4.3.6.4: triangles Arguments">4.3.6.4 triangles Arguments</a></div><div class="st300_formal_item_content"><ol class="st300_list_ordered"><li class="st300_list_item">The non-negative triangle count</li><li class="st300_list_item">The non-negative size in bits of a triangle vertex index</li></ol></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss6c5" href="#st300_p4s3ss6c5" title="Paragraph 4.3.6.5">5</a></div><div class="st300_paragraph">If the subcommand does not appear in the section, implementations MUST behave as if the following subcommand had been specified:</div></div><div class="st300_formal_item"><a id="smft.sections.smf.subs.triangles.default"/><div class="st300_formal_item_title"><a id="st300_p4s3ss6c6" href="#st300_p4s3ss6c6" title="Formal item 4.3.6.6: vertices Default">4.3.6.6 vertices Default</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">trianges 0 32</pre></div></div></div><div class="st300_subsection_container"><a id="smft.sections.smf.subs.vertices"/><div class="st300_subsection_title_number"><a id="st300_p4s3ss7" href="#st300_p4s3ss7" title="Subsection 4.3.7: Subcommand - vertices">4.3.7</a></div><div class="st300_subsection_title">Subcommand - vertices</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss7c1" href="#st300_p4s3ss7c1" title="Paragraph 4.3.7.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">vertices</span> subcommand specifies the number of <a class="st300_link" href="#smf_model.vertex">vertices</a> that will appear in the model for each attribute.</div></div><div class="st300_formal_item"><a id="smft.sections.smf.subs.vertices.def"/><div class="st300_formal_item_title"><a id="st300_p4s3ss7c2" href="#st300_p4s3ss7c2" title="Formal item 4.3.7.2: vertices">4.3.7.2 vertices</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">smf_vertices =
  "vertices" , integer-unsigned ;</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss7c3" href="#st300_p4s3ss7c3" title="Paragraph 4.3.7.3">3</a></div><div class="st300_paragraph">The subcommand takes the following arguments:</div></div><div class="st300_formal_item"><a id="smft.sections.smf.subs.vertices.args"/><div class="st300_formal_item_title"><a id="st300_p4s3ss7c4" href="#st300_p4s3ss7c4" title="Formal item 4.3.7.4: vertices Arguments">4.3.7.4 vertices Arguments</a></div><div class="st300_formal_item_content"><ol class="st300_list_ordered"><li class="st300_list_item">The non-negative number of vertices that will appear in the file</li></ol></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s3ss7c5" href="#st300_p4s3ss7c5" title="Paragraph 4.3.7.5">5</a></div><div class="st300_paragraph">If the subcommand does not appear in the section, implementations MUST behave as if the following subcommand had been specified:</div></div><div class="st300_formal_item"><a id="smft.header.vertices.default"/><div class="st300_formal_item_title"><a id="st300_p4s3ss7c6" href="#st300_p4s3ss7c6" title="Formal item 4.3.7.6: vertices Default">4.3.7.6 vertices Default</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">vertices 0</pre></div></div></div></div><div class="st300_section_container"><a id="smft.sections.triangles"/><div class="st300_section_title_number"><a id="st300_p4s4" href="#st300_p4s4" title="Section 4.4: Section - triangles">4.4</a></div><div class="st300_section_title">Section - triangles</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s4ss1" title="Link to subsection 4.4.1: Definition">4.4.1. Definition</a></li></ul><div class="st300_subsection_container"><a id="smft.sections.triangles.def"/><div class="st300_subsection_title_number"><a id="st300_p4s4ss1" href="#st300_p4s4ss1" title="Subsection 4.4.1: Definition">4.4.1</a></div><div class="st300_subsection_title">Definition</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s4ss1c1" href="#st300_p4s4ss1c1" title="Paragraph 4.4.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">triangles</span> section specifies triangle data that will appear in the model.</div></div><div class="st300_formal_item"><a id="smft.data.triangles.def"/><div class="st300_formal_item_title"><a id="st300_p4s4ss1c2" href="#st300_p4s4ss1c2" title="Formal item 4.4.1.2: triangles">4.4.1.2 triangles</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">data_command_triangles =
  "triangles" ;</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s4ss1c3" href="#st300_p4s4ss1c3" title="Paragraph 4.4.1.3">3</a></div><div class="st300_paragraph">The command takes no arguments.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s4ss1c4" href="#st300_p4s4ss1c4" title="Paragraph 4.4.1.4">4</a></div><div class="st300_paragraph">In a file that is specified to contain <span class="st300_term variable">k</span> triangles, the next <span class="st300_term variable">k</span> non-empty, non-commented lines will contain exactly <span class="st300_term constant">3</span> whitespace-separated unsigned integer values each representing the index of a vertex. Implementations MUST raise errors if there are not exactly <span class="st300_term variable">k</span> triangles specified before section's <a class="st300_link" href="#smft.sections.end">end</a> command.</div></div></div></div><div class="st300_section_container"><a id="smft.sections.vertices-noninterleaved"/><div class="st300_section_title_number"><a id="st300_p4s5" href="#st300_p4s5" title="Section 4.5: Section - vertices-noninterleaved">4.5</a></div><div class="st300_section_title">Section - vertices-noninterleaved</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s5ss1" title="Link to subsection 4.5.1: Definition">4.5.1. Definition</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s5ss2" title="Link to subsection 4.5.2: Subcommands">4.5.2. Subcommands</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s5ss3" title="Link to subsection 4.5.3: Subcommand - attribute">4.5.3. Subcommand - attribute</a></li></ul><div class="st300_subsection_container"><a id="smft.sections.vertices-noninterleaved.def"/><div class="st300_subsection_title_number"><a id="st300_p4s5ss1" href="#st300_p4s5ss1" title="Subsection 4.5.1: Definition">4.5.1</a></div><div class="st300_subsection_title">Definition</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s5ss1c1" href="#st300_p4s5ss1c1" title="Paragraph 4.5.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">vertices-noninterleaved</span> section specifies the vertex data that will appear in the model.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s5ss1c2" href="#st300_p4s5ss1c2" title="Paragraph 4.5.1.2">2</a></div><div class="st300_paragraph">The contents of a <span class="st300_term command">vertices-noninterleaved</span> section are a series of <a class="st300_link" href="#smft.sections.vertices-noninterleaved.subs">subcommands</a> with at most one subcommand appearing on each line within the section. A <span class="st300_term term">subcommand</span> consists of the subcommand's name and a series of zero or more arguments. Implementations MUST ignore subcommands that have unrecognized names, but SHOULD log warning messages to indicate that unrecognized subcommands have been specified.</div></div></div><div class="st300_subsection_container"><a id="smft.sections.vertices-noninterleaved.subs"/><div class="st300_subsection_title_number"><a id="st300_p4s5ss2" href="#st300_p4s5ss2" title="Subsection 4.5.2: Subcommands">4.5.2</a></div><div class="st300_subsection_title">Subcommands</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s5ss2c1" href="#st300_p4s5ss2c1" title="Paragraph 4.5.2.1">1</a></div><div class="st300_paragraph">This version of the specification defines the following <span class="st300_term command">vertices-noninterleaved</span> <span class="st300_term term">subcommands</span>:</div></div><div class="st300_formal_item"><a id="smft.sections.vertices-noninterleaved.subs.list"/><div class="st300_formal_item_title"><a id="st300_p4s5ss2c2" href="#st300_p4s5ss2c2" title="Formal item 4.5.2.2: Subcommands">4.5.2.2 Subcommands</a></div><div class="st300_formal_item_content"><ul class="st300_list_unordered"><li class="st300_list_item"><a class="st300_link" href="#smft.sections.vertices-noninterleaved.attribute">attribute</a></li></ul></div></div></div><div class="st300_subsection_container"><a id="smft.sections.vertices-noninterleaved.attribute"/><div class="st300_subsection_title_number"><a id="st300_p4s5ss3" href="#st300_p4s5ss3" title="Subsection 4.5.3: Subcommand - attribute">4.5.3</a></div><div class="st300_subsection_title">Subcommand - attribute</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s5ss3c1" href="#st300_p4s5ss3c1" title="Paragraph 4.5.3.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">attribute</span> subcommand indicates the start of data for an attribute.</div></div><div class="st300_formal_item"><a id="smft.sections.vertices-noninterleaved.attribute.def"/><div class="st300_formal_item_title"><a id="st300_p4s5ss3c2" href="#st300_p4s5ss3c2" title="Formal item 4.5.3.2: attribute">4.5.3.2 attribute</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">vertices_noninterleaved_attribute =
  "attribute" , attribute_name ;</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s5ss3c3" href="#st300_p4s5ss3c3" title="Paragraph 4.5.3.3">3</a></div><div class="st300_paragraph">The command takes the following arguments:</div></div><div class="st300_formal_item"><a id="smft.sections.vertices-noninterleaved.attribute.args"/><div class="st300_formal_item_title"><a id="st300_p4s5ss3c4" href="#st300_p4s5ss3c4" title="Formal item 4.5.3.4: attribute Arguments">4.5.3.4 attribute Arguments</a></div><div class="st300_formal_item_content"><ol class="st300_list_ordered"><li class="st300_list_item">The name of the attribute</li></ol></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s5ss3c5" href="#st300_p4s5ss3c5" title="Paragraph 4.5.3.5">5</a></div><div class="st300_paragraph">The named attribute must have been declared in the <a class="st300_link" href="#smft.sections.smf">smf</a> section; Implementations MUST raise errors when encountering <span class="st300_term command">attribute</span> subcommands that name attributes that were not declared in the <a class="st300_link" href="#smft.sections.smf">smf</a> section.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s5ss3c6" href="#st300_p4s5ss3c6" title="Paragraph 4.5.3.6">6</a></div><div class="st300_paragraph">For an attribute <span class="st300_term variable">a</span> that specifies <span class="st300_term variable">c</span> components of type <span class="st300_term variable">t</span>, in a file that is specified to contain <span class="st300_term variable">v</span> vertices, the next <span class="st300_term variable">v</span> non-empty, non-commented lines will contain exactly <span class="st300_term variable">c</span> whitespace-separated values of type <span class="st300_term variable">t</span>. Implementations MUST raise errors if there are not exactly <span class="st300_term variable">v</span> vertex values specified before section's <a class="st300_link" href="#smft.sections.end">end</a> command or the start of the next <span class="st300_term command">attribute</span> subcommand, whichever occurs first.</div></div></div></div><div class="st300_section_container"><a id="smft.sections.metadata"/><div class="st300_section_title_number"><a id="st300_p4s6" href="#st300_p4s6" title="Section 4.6: Section - metadata">4.6</a></div><div class="st300_section_title">Section - metadata</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="#st300_p4s6ss1" title="Link to subsection 4.6.1: Definition">4.6.1. Definition</a></li></ul><div class="st300_subsection_container"><a id="smft.sections.metadata.def"/><div class="st300_subsection_title_number"><a id="st300_p4s6ss1" href="#st300_p4s6ss1" title="Subsection 4.6.1: Definition">4.6.1</a></div><div class="st300_subsection_title">Definition</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s6ss1c1" href="#st300_p4s6ss1c1" title="Paragraph 4.6.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term command">metadata</span> section specifies an item of optional metadata that will be attached to the model.</div></div><div class="st300_formal_item"><a id="smft.sections.metadata.def.syntax"/><div class="st300_formal_item_title"><a id="st300_p4s6ss1c2" href="#st300_p4s6ss1c2" title="Formal item 4.6.1.2: metadata">4.6.1.2 metadata</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">metadata =
  "metadata" , schema_name , integer-unsigned , integer-unsigned , integer-unsigned ;
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s6ss1c3" href="#st300_p4s6ss1c3" title="Paragraph 4.6.1.3">3</a></div><div class="st300_paragraph">The command takes the following arguments:</div></div><div class="st300_formal_item"><a id="smft.sections.metadata.args"/><div class="st300_formal_item_title"><a id="st300_p4s6ss1c4" href="#st300_p4s6ss1c4" title="Formal item 4.6.1.4: meta Arguments">4.6.1.4 meta Arguments</a></div><div class="st300_formal_item_content"><ol class="st300_list_ordered"><li class="st300_list_item">The schema ID</li><li class="st300_list_item">The major version of the schema</li><li class="st300_list_item">The minor version of the schema</li><li class="st300_list_item">The non-negative number of lines of metadata that will follow the command</li></ol></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s6ss1c5" href="#st300_p4s6ss1c5" title="Paragraph 4.6.1.5">5</a></div><div class="st300_paragraph">For any <span class="st300_term variable">v</span>, <span class="st300_term variable">s</span>, and <span class="st300_term variable">n</span>, the command <span class="st300_term command">meta v s n</span> will indicate that the next <span class="st300_term expression">n</span> non-empty, non-commented lines will contain <a class="st300_link_external" href="https://tools.ietf.org/html/rfc4648">RFC4648 base64url</a> encoded data of a type with vendor <span class="st300_term variable">v</span> and schema <span class="st300_term variable">s</span>. Implementations MUST raise errors if there are not exactly <span class="st300_term variable">n</span> lines of data specified before the section's <a class="st300_link" href="#smft.sections.end">end</a> command.</div></div></div></div><div class="st300_section_container"><a id="smft.example"/><div class="st300_section_title_number"><a id="st300_p4s7" href="#st300_p4s7" title="Section 4.7: Example">4.7</a></div><div class="st300_section_title">Example</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p4s7ss1c1" href="#st300_p4s7ss1c1" title="Paragraph 4.7.1.1">1</a></div><div class="st300_paragraph">The following is a complete example of an <span class="st300_term type">SMF/T</span> file:</div></div><div class="st300_formal_item"><a id="smft.example.def"/><div class="st300_formal_item_title"><a id="st300_p4s7ss1c2" href="#st300_p4s7ss1c2" title="Formal item 4.7.1.2: smf">4.7.1.2 smf</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">smf 1 0
schema com.io7m.example.smf 1 0
vertices 9
triangles 4 32
coordinates +x +y -z counter-clockwise
attribute "POSITION" float 3 32
attribute "NORMAL" float 3 32
attribute "UV:UVMap" float 2 32
attribute "GROUP:group0" float 1 32
end

#
# This is a comment and will be ignored.
#

vertices-noninterleaved
attribute "POSITION"
0.000000000000000 0.000000000000000 0.000000000000000
1.000000000000000 0.000000000000000 0.000000000000000
0.000000000000000 0.000000000000000 -2.000000000000000
1.000000000000000 0.000000000000000 -2.000000000000000
2.000000000000000 0.000000000000000 0.000000000000000
2.000000000000000 0.000000000000000 -2.000000000000000
1.000000000000000 0.000000000000000 0.000000000000000
1.000000000000000 0.000000000000000 -2.000000000000000
1.000000000000000 0.000000000000000 0.000000000000000
attribute "NORMAL"
0.000000000000000 1.000000000000000 0.000000000000000
0.000000000000000 0.999999940395355 0.000000000000000
0.000000000000000 1.000000000000000 0.000000000000000
0.000000000000000 1.000000000000000 0.000000000000000
0.000000000000000 1.000000000000000 0.000000000000000
0.000000000000000 1.000000000000000 0.000000000000000
0.000000000000000 0.999999940395355 0.000000000000000
0.000000000000000 1.000000000000000 0.000000000000000
0.000000000000000 0.999999940395355 0.000000000000000
attribute "UV:UVMap"
0.112528264522552 0.912521243095398
0.112528264522552 0.712549567222595
0.512471735477448 0.912521243095398
0.696853816509247 0.614087224006653
0.396896183490753 0.464108407497406
0.696853816509247 0.464108407497406
0.396896213293076 0.614087224006653
0.512471735477448 0.712549448013306
0.396896213293076 0.614087224006653
attribute "GROUP:group0"
0.000000000000000
0.300000011920929
0.200000002980232
0.400000005960465
0.600000023841858
0.699999988079071
0.300000011920929
0.400000005960465
0.300000011920929
end

triangles
1 2 0
6 5 3
1 7 2
8 4 5
end

metadata com.example.metadata.example0 1 0 1
aGVsbG8taGVsbG8K
end

metadata com.example.metadata.example3 2 0 5
AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1
Njc4OTo7PD0-P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWpr
bG1ub3BxcnN0dXZ3eHl6e3x9fn-AgYKDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en6Ch
oqOkpaanqKmqq6ytrq-wsbKztLW2t7i5uru8vb6_wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX
2Nna29zd3t_g4eLj5OXm5-jp6uvs7e7v8PHy8_T19vf4-fr7_P3-_w==
end
</pre></div></div></div></div><div class="st300_part_container"><a id="history"/><div class="st300_part_title_number"><a id="st300_p5" href="#st300_p5" title="Part 5: Specification History">5</a></div><div class="st300_part_title">Specification History</div><ul class="st300_contents st300_part_contents_outer st300_part_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_section"><a href="#st300_p5s1" title="Link to section 5.1: History">5.1. History</a></li></ul><div class="st300_section_container"><a id="history.history"/><div class="st300_section_title_number"><a id="st300_p5s1" href="#st300_p5s1" title="Section 5.1: History">5.1</a></div><div class="st300_section_title">History</div><span/><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p5s1c1" href="#st300_p5s1c1" title="Paragraph 5.1.1">1</a></div><div class="st300_paragraph">This section provides a brief summary of specification changes over time.</div></div><div class="st300_formal_item"><a id="history.history.def"/><div class="st300_formal_item_title"><a id="st300_p5s1c2" href="#st300_p5s1c2" title="Formal item 5.1.2: History">5.1.2 History</a></div><div class="st300_formal_item_content"><ul class="st300_list_unordered"><li class="st300_list_item"><span class="st300_term expression">1.0</span> Initial specification.</li></ul></div></div></div></div><div class="st300_footnotes"><hr/><div class="st300_footnote_container"><div class="st300_footnote_id">[<a id="st300_f_424_0" href="#st300_fr_323" title="Jump back to reference 0 of footnote smf_model.collada">0</a>]</div><div class="st300_footnote_body"><a class="st300_link_external" href="https://en.wikipedia.org/wiki/COLLADA">https://en.wikipedia.org/wiki/COLLADA</a></div></div><div class="st300_footnote_container"><div class="st300_footnote_id">[<a id="st300_f_1809_0" href="#st300_fr_1705" title="Jump back to reference 0 of footnote smf_model.xmlns">1</a>]</div><div class="st300_footnote_body"><a class="st300_link_external" href="https://en.wikipedia.org/wiki/XML_Namespace">https://en.wikipedia.org/wiki/XML_Namespace</a></div></div><div class="st300_footnote_container"><div class="st300_footnote_id">[<a id="st300_f_2035_0" href="#st300_fr_2020" title="Jump back to reference 0 of footnote smfb.png">2</a>]</div><div class="st300_footnote_body"><a class="st300_link_external" href="https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header">https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header</a></div></div><div class="st300_footnote_container"><div class="st300_footnote_id">[<a id="st300_f_2286_0" href="#st300_fr_2256" title="Jump back to reference 0 of footnote smfb.sections.compat">3</a>]</div><div class="st300_footnote_body">Ignoring unrecognized sections allows for forwards compatibility: An implementation supporting version <span class="st300_term expression">m</span> can read a file of version <span class="st300_term expression">n</span>, where <span class="st300_term expression">m &lt; n</span>, and ignore any new sections specified by format <span class="st300_term expression">n</span> that it does not understand.</div></div><div class="st300_footnote_container"><div class="st300_footnote_id">[<a id="st300_f_2433_0" href="#st300_fr_2417" title="Jump back to reference 0 of footnote smfb.sections.alignment.vector">4</a>]</div><div class="st300_footnote_body">The requirement for data to be aligned to <span class="st300_term constant">16</span> octet boundaries is intended to facilitate implementations using vector instruction sets such as <a class="st300_link_external" href="https://en.wikipedia.org/wiki/Streaming_SIMD_Extensions">SSE</a> to efficiently operate on memory-mapped <span class="st300_term type">SMF/B</span> files.</div></div><div class="st300_footnote_container"><div class="st300_footnote_id">[<a id="st300_f_3981_0" href="#st300_fr_3913" title="Jump back to reference 0 of footnote smft.sections.compat">5</a>]</div><div class="st300_footnote_body">Ignoring unrecognized sections allows for forwards compatibility: An implementation supporting version <span class="st300_term expression">m</span> can read a file of version <span class="st300_term expression">n</span>, where <span class="st300_term expression">m &lt; n</span>, and ignore any new sections specified by format <span class="st300_term expression">n</span> that it does not understand.</div></div></div></div></body></html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>io7m-smfj 0.6.0 Specification: 2. Model</title><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8"/><link rel="stylesheet" type="text/css" href="kstructural-layout.css"/><link rel="stylesheet" type="text/css" href="kstructural-colour.css"/><link rel="stylesheet" type="text/css" href="specification.css"/></head><body><div class="st300_body"><div class="st300_navbar st300_navbar_top"><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_title_cell">1. Notational Conventions</td><td class="st300_navbar_up_title_cell">io7m-smfj 0.6.0 Specification</td><td class="st300_navbar_next_title_cell">3. SMFT - Text Encoding</td></tr><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="s1.xhtml#st300_s1" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="index-m.xhtml" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"><a rel="next" href="s3.xhtml#st300_s3" title="Go to next page">Next</a></td></tr></table><hr class="st300_hr"/></div><div class="st300_section_container"><a id="smf_model.model"/><div class="st300_section_title_number"><a id="st300_s2" href="#st300_s2" title="Section 2: Model">2</a></div><div class="st300_section_title">Model</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="s2.xhtml#st300_s2ss1" title="Link to subsection 2.1: Overview">2.1. Overview</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="s2.xhtml#st300_s2ss2" title="Link to subsection 2.2: Mesh">2.2. Mesh</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="s2.xhtml#st300_s2ss3" title="Link to subsection 2.3: Attributes">2.3. Attributes</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="s2.xhtml#st300_s2ss4" title="Link to subsection 2.4: Vertices">2.4. Vertices</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="s2.xhtml#st300_s2ss5" title="Link to subsection 2.5: Triangles">2.5. Triangles</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="s2.xhtml#st300_s2ss6" title="Link to subsection 2.6: Coordinate System">2.6. Coordinate System</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="s2.xhtml#st300_s2ss7" title="Link to subsection 2.7: Schema ID">2.7. Schema ID</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="s2.xhtml#st300_s2ss8" title="Link to subsection 2.8: Metadata">2.8. Metadata</a></li></ul><div class="st300_subsection_container"><a id="smf_model.overview"/><div class="st300_subsection_title_number"><a id="st300_s2ss1" href="#st300_s2ss1" title="Subsection 2.1: Overview">2.1</a></div><div class="st300_subsection_title">Overview</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_s2ss1c1" href="#st300_s2ss1c1" title="Paragraph 2.1.1">1</a></div><div class="st300_paragraph">The SMF model is a minimalist, portable storage model for <span class="st300_term term">triangle mesh data</span>. SMF files are intended to be consumed by 3D rendering engines directly and therefore do not contain any complex interchange features common to formats such as COLLADA <span class="st300_footnote_reference">[<a href="s2.xhtml#st300_f_322_0" id="st300_fr_278" title="Jump to footnote smf_model.collada (reference 0)">0</a>]</span>. The <a class="st300_link" href="s3.xhtml#smft">text</a> and <a class="st300_link" href="s4.xhtml#smfb">binary</a> encodings of the model are designed to be trivial to parse and to permit the easy construction of extremely fast event-based parsers that do not require loading the entire file into memory for processing.</div></div></div><div class="st300_subsection_container"><a id="smf_model.mesh"/><div class="st300_subsection_title_number"><a id="st300_s2ss2" href="#st300_s2ss2" title="Subsection 2.2: Mesh">2.2</a></div><div class="st300_subsection_title">Mesh</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_s2ss2c1" href="#st300_s2ss2c1" title="Paragraph 2.2.1">1</a></div><div class="st300_paragraph">A <span class="st300_term term">mesh</span> in the SMF model is a set of <a class="st300_link" href="s2.xhtml#smf_model.triangle">triangles</a>.</div></div></div><div class="st300_subsection_container"><a id="smf_model.attribute"/><div class="st300_subsection_title_number"><a id="st300_s2ss3" href="#st300_s2ss3" title="Subsection 2.3: Attributes">2.3</a></div><div class="st300_subsection_title">Attributes</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_s2ss3c1" href="#st300_s2ss3c1" title="Paragraph 2.3.1">1</a></div><div class="st300_paragraph">An <span class="st300_term term">attribute</span> in the SMF model is a uniquely-named array of elements of a given type. All attributes within a particular SMF file have the same number of elements.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_s2ss3c2" href="#st300_s2ss3c2" title="Paragraph 2.3.2">2</a></div><div class="st300_paragraph">Implementations are required to support attributes of at least the following types:</div></div><div class="st300_formal_item"><a id="smf_model.attribute.types"/><div class="st300_formal_item_title"><a id="st300_s2ss3c3" href="#st300_s2ss3c3" title="Formal item 2.3.3: Types">2.3.3 Types</a></div><div class="st300_formal_item_content"><ul class="st300_list_unordered"><li class="st300_list_item">8/16/32/64-bit signed integer vectors of 1-4 components</li><li class="st300_list_item">8/16/32/64-bit unsigned integer vectors of 1-4 components</li><li class="st300_list_item">16/32/64-bit floating point vectors of 1-4 components</li></ul></div></div></div><div class="st300_subsection_container"><a id="smf_model.vertex"/><div class="st300_subsection_title_number"><a id="st300_s2ss4" href="#st300_s2ss4" title="Subsection 2.4: Vertices">2.4</a></div><div class="st300_subsection_title">Vertices</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_s2ss4c1" href="#st300_s2ss4c1" title="Paragraph 2.4.1">1</a></div><div class="st300_paragraph">A <span class="st300_term term">vertex</span> is an abstract object consisting of exactly one element taken from each of the defined <a class="st300_link" href="s2.xhtml#smf_model.attribute">attributes</a>. A vertex can essentially be considered to be an array index; The vertex at index <span class="st300_term expression">n</span> can be considered to be the aggregation of the <span class="st300_term expression">nth</span> elements of all of the defined attributes. Vertices are numbered starting at <span class="st300_term expression">0</span>.</div></div></div><div class="st300_subsection_container"><a id="smf_model.triangle"/><div class="st300_subsection_title_number"><a id="st300_s2ss5" href="#st300_s2ss5" title="Subsection 2.5: Triangles">2.5</a></div><div class="st300_subsection_title">Triangles</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_s2ss5c1" href="#st300_s2ss5c1" title="Paragraph 2.5.1">1</a></div><div class="st300_paragraph">A triangle is a 3-tuple of <a class="st300_link" href="s2.xhtml#smf_model.vertex">vertices</a>. In the SMF model, a triangle references vertices by their numeric index.</div></div></div><div class="st300_subsection_container"><a id="smf_model.coords"/><div class="st300_subsection_title_number"><a id="st300_s2ss6" href="#st300_s2ss6" title="Subsection 2.6: Coordinate System">2.6</a></div><div class="st300_subsection_title">Coordinate System</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_s2ss6c1" href="#st300_s2ss6c1" title="Paragraph 2.6.1">1</a></div><div class="st300_paragraph">A <span class="st300_term term">coordinate system</span> in the SMF model is a set of three axis names and a triangle <span class="st300_term term">winding order</span>. The axis names specify which Cartesian coordinate system axes correspond to the <span class="st300_term term">right</span>, <span class="st300_term term">up</span>, and <span class="st300_term term">forward</span> directions. The winding order specifies whether vertices for triangles are given in clockwise or counter-clockwise order. A coordinate system is only <span class="st300_term term">valid</span> if the three chosen axes have different <span class="st300_term term">axis names</span>. The <span class="st300_term function">axisName</span> function relates an axis to an axis name. The <span class="st300_term function">axisValid</span> function gives a formal definition of the validity of sets of axes.</div></div><div class="st300_formal_item"><a id="smf_model.coords.axis_def"/><div class="st300_formal_item_title"><a id="st300_s2ss6c2" href="#st300_s2ss6c2" title="Formal item 2.6.2: Axis">2.6.2 Axis</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">module Axis where

data Axis
  = PositiveX
  | PositiveY
  | PositiveZ
  | NegativeX
  | NegativeY
  | NegativeZ

data AxisName
  = AxisX
  | AxisY
  | AxisZ

axisName :: Axis -&gt; AxisName
axisName PositiveX = AxisX
axisName NegativeX = AxisX
axisName PositiveY = AxisY
axisName NegativeY = AxisY
axisName PositiveZ = AxisZ
axisName NegativeZ = AxisZ

data AxisSystem = AxisSystem {
  axis_right   :: Axis,
  axis_up      :: Axis,
  axis_forward :: Axis
}

axisValid :: (Axis, Axis, Axis) -&gt; Bool
axisValid (right, up, forward) =
  case (axisName right, axisName up, axisName forward) of
    (AxisX, AxisY, AxisZ) -&gt; True
    (AxisZ, AxisX, AxisY) -&gt; True
    (AxisY, AxisZ, AxisX) -&gt; True
    _                     -&gt; False

data WindingOrder
  = WindingOrderClockwise
  | WindingOrderCounterClockwise

data CoordinateSystem = CoordinateSystem {
  coords_axes  :: AxisSystem,
  coords_order :: WindingOrder
}</pre></div></div></div><div class="st300_subsection_container"><a id="smf_model.schema_id"/><div class="st300_subsection_title_number"><a id="st300_s2ss7" href="#st300_s2ss7" title="Subsection 2.7: Schema ID">2.7</a></div><div class="st300_subsection_title">Schema ID</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_s2ss7c1" href="#st300_s2ss7c1" title="Paragraph 2.7.1">1</a></div><div class="st300_paragraph">A <span class="st300_term term">schema identifier</span> is an optional identifier that can be inserted into SMF files. Because the SMF model does not predefine any particular <a class="st300_link" href="s2.xhtml#smf_model.attribute">attributes</a>, tools that consume SMF files cannot know ahead of time if the file they have just loaded will actually contain the attributes that they are expecting. A <span class="st300_term term">schema identifier</span> effectively provides a concrete name for a set of attributes so that tools that process SMF files can perform validation of attributes based on the identifier. It is somewhat analogous to XML namespace <span class="st300_footnote_reference">[<a href="s2.xhtml#st300_f_827_0" id="st300_fr_744" title="Jump to footnote smf_model.xmlns (reference 0)">1</a>]</span> declarations; The author of a particular document inserts an XML namespace identifier into their document, and validation tools use this identifier to locate schema definitions against which the document is then validated.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_s2ss7c2" href="#st300_s2ss7c2" title="Paragraph 2.7.2">2</a></div><div class="st300_paragraph">A schema identifier consists of four integer values:</div></div><div class="st300_formal_item"><a id="smf_model.schema_id.def"/><div class="st300_formal_item_title"><a id="st300_s2ss7c3" href="#st300_s2ss7c3" title="Formal item 2.7.3: Schema Identifier">2.7.3 Schema Identifier</a></div><div class="st300_formal_item_content"><pre class="st300_verbatim">data SchemaIdentifier = SchemaIdentifier {
  vendor_id            :: Word32,
  schema_id            :: Word32,
  schema_version_major :: Word32,
  schema_version_minor :: Word32
}
</pre></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_s2ss7c4" href="#st300_s2ss7c4" title="Paragraph 2.7.4">4</a></div><div class="st300_paragraph">The <span class="st300_term term">vendor_id</span> uniquely identifiers the vendor, the <span class="st300_term term">schema_id</span> uniquely identifies the file type, and the <span class="st300_term term">schema_version_major</span> and <span class="st300_term term">schema_version_minor</span> values identify the version of the schema.</div></div></div><div class="st300_subsection_container"><a id="smf_model.metadata"/><div class="st300_subsection_title_number"><a id="st300_s2ss8" href="#st300_s2ss8" title="Subsection 2.8: Metadata">2.8</a></div><div class="st300_subsection_title">Metadata</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_s2ss8c1" href="#st300_s2ss8c1" title="Paragraph 2.8.1">1</a></div><div class="st300_paragraph">The SMF model supports the inclusion of arbitrary metadata. A <span class="st300_term term">metadata value</span> is an opaque data value with <span class="st300_term term">vendor</span> and <span class="st300_term term">schema</span> identifiers specified in the same manner as the <a class="st300_link" href="s2.xhtml#smf_model.schema_id">schema identifier</a>. Applications may use the metadata facilities to associate small amounts of extra information with mesh data. Typical uses include checksums, copyright information, and generating software package version information.</div></div></div><div class="st300_footnotes"><hr/><div class="st300_footnote_container"><div class="st300_footnote_id">[<a id="st300_f_322_0" href="s2.xhtml#st300_fr_278" title="Jump back to reference 0 of footnote smf_model.collada">0</a>]</div><div class="st300_footnote_body"><a class="st300_link_external" href="https://en.wikipedia.org/wiki/COLLADA">https://en.wikipedia.org/wiki/COLLADA</a></div></div><div class="st300_footnote_container"><div class="st300_footnote_id">[<a id="st300_f_827_0" href="s2.xhtml#st300_fr_744" title="Jump back to reference 0 of footnote smf_model.xmlns">1</a>]</div><div class="st300_footnote_body"><a class="st300_link_external" href="https://en.wikipedia.org/wiki/XML_Namespace">https://en.wikipedia.org/wiki/XML_Namespace</a></div></div></div></div><div class="st300_navbar st300_navbar_bottom"><hr class="st300_hr"/><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="s1.xhtml#st300_s1" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="index-m.xhtml" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"><a rel="next" href="s3.xhtml#st300_s3" title="Go to next page">Next</a></td></tr><tr><td class="st300_navbar_prev_title_cell">1. Notational Conventions</td><td class="st300_navbar_up_title_cell">io7m-smfj 0.6.0 Specification</td><td class="st300_navbar_next_title_cell">3. SMFT - Text Encoding</td></tr></table></div></div></body></html>
